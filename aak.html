<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sausages, Buns & Breads Master 4 – The Oven Revolution</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
            --primary: #ff6b35;
            --secondary: #f7931e;
            --dark: #2c3e50;
            --light: #f8f9fa;
            --success: #28a745;
            --danger: #dc3545;
            --warning: #ffc107;
            --info: #17a2b8;
            --purple: #6f42c1;
            --pink: #e83e8c;
            --burn: #8b4513;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        body {
            background: linear-gradient(135deg, #ffecd2 0%, #fcb69f 100%);
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            overflow-x: hidden;
        }

        header {
            background: var(--dark);
            color: white;
            padding: 1rem;
            text-align: center;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            position: relative;
            z-index: 100;
        }

        .logo {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 0.5rem;
            font-size: 1.5rem;
            font-weight: bold;
        }

        .game-container {
            flex: 1;
            display: flex;
            flex-direction: column;
            max-width: 1200px;
            margin: 0 auto;
            width: 100%;
            padding: 1rem;
        }

        .game-stats {
            display: flex;
            justify-content: space-between;
            background: white;
            padding: 0.8rem;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
            margin-bottom: 1rem;
            flex-wrap: wrap;
            gap: 0.5rem;
        }

        .stat-item {
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .stat-value {
            font-weight: bold;
            color: var(--primary);
        }

        .game-area {
            display: flex;
            flex-direction: column;
            gap: 1rem;
            flex: 1;
        }

        .ovens-section {
            background: white;
            border-radius: 8px;
            padding: 1rem;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
            flex: 1;
        }

        .section-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1rem;
        }

        .section-title {
            font-size: 1.2rem;
            font-weight: bold;
            color: var(--dark);
        }

        .ovens-container {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 1rem;
        }

        .oven {
            background: #f8f9fa;
            border: 2px solid #dee2e6;
            border-radius: 8px;
            padding: 1rem;
            position: relative;
            transition: all 0.3s ease;
        }

        .oven.active {
            border-color: var(--primary);
            box-shadow: 0 0 10px rgba(255, 107, 53, 0.3);
        }

        .oven-header {
            display: flex;
            justify-content: space-between;
            margin-bottom: 0.5rem;
        }

        .oven-name {
            font-weight: bold;
        }

        .oven-level {
            background: var(--primary);
            color: white;
            border-radius: 50%;
            width: 24px;
            height: 24px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.8rem;
        }

        .oven-display {
            height: 100px;
            background: #343a40;
            border-radius: 4px;
            position: relative;
            overflow: hidden;
            margin-bottom: 0.5rem;
        }

        .oven-glow {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: radial-gradient(circle, rgba(255, 107, 53, 0.8) 0%, rgba(255, 107, 53, 0) 70%);
            opacity: 0;
            transition: opacity 0.5s ease;
        }

        .oven.active .oven-glow {
            opacity: 1;
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0% { opacity: 0.5; }
            50% { opacity: 1; }
            100% { opacity: 0.5; }
        }

        .oven-slots {
            display: flex;
            gap: 0.5rem;
            margin-bottom: 0.5rem;
            flex-wrap: wrap;
        }

        .oven-slot {
            flex: 1;
            min-width: 40px;
            height: 40px;
            background: #e9ecef;
            border-radius: 4px;
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
            overflow: hidden;
            cursor: pointer;
        }

        .oven-slot.occupied {
            background: #fff3cd;
        }

        .oven-slot.done {
            background: #d4edda;
        }

        .oven-slot.burnt {
            background: #f8d7da;
            animation: burn-glow 1s infinite;
        }

        @keyframes burn-glow {
            0% { box-shadow: 0 0 5px rgba(220, 53, 69, 0.5); }
            50% { box-shadow: 0 0 15px rgba(220, 53, 69, 0.8); }
            100% { box-shadow: 0 0 5px rgba(220, 53, 69, 0.5); }
        }

        .slot-item {
            position: absolute;
            width: 30px;
            height: 30px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.2rem;
        }

        .slot-item.burnt {
            filter: grayscale(100%) brightness(0.5);
            animation: burnt-item 2s infinite;
        }

        @keyframes burnt-item {
            0% { transform: rotate(0deg); }
            25% { transform: rotate(5deg); }
            50% { transform: rotate(0deg); }
            75% { transform: rotate(-5deg); }
            100% { transform: rotate(0deg); }
        }

        .slot-progress {
            position: absolute;
            bottom: 0;
            left: 0;
            height: 4px;
            background: var(--primary);
            width: 0;
            transition: width 0.1s linear;
        }

        .slot-progress.burnt {
            background: var(--danger);
        }

        .oven-controls {
            display: flex;
            gap: 0.5rem;
        }

        .btn {
            padding: 0.5rem 1rem;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-weight: bold;
            transition: all 0.2s ease;
            flex: 1;
        }

        .btn-primary {
            background: var(--primary);
            color: white;
        }

        .btn-primary:hover {
            background: #e85a2e;
        }

        .btn-secondary {
            background: #6c757d;
            color: white;
        }

        .btn-secondary:hover {
            background: #5a6268;
        }

        .btn-success {
            background: var(--success);
            color: white;
        }

        .btn-success:hover {
            background: #218838;
        }

        .btn-danger {
            background: var(--danger);
            color: white;
        }

        .btn-danger:hover {
            background: #c82333;
        }

        .btn-purple {
            background: var(--purple);
            color: white;
        }

        .btn-purple:hover {
            background: #59359a;
        }

        .btn-pink {
            background: var(--pink);
            color: white;
        }

        .btn-pink:hover {
            background: #d91a72;
        }

        .btn-burn {
            background: var(--burn);
            color: white;
        }

        .btn-burn:hover {
            background: #6d3711;
        }

        .customers-section {
            background: white;
            border-radius: 8px;
            padding: 1rem;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
            margin-bottom: 1rem;
        }

        .customers-container {
            display: flex;
            gap: 1rem;
            overflow-x: auto;
            padding-bottom: 0.5rem;
        }

        .customer {
            min-width: 150px;
            background: #f8f9fa;
            border-radius: 8px;
            padding: 1rem;
            position: relative;
            border: 2px solid #dee2e6;
        }

        .customer.waiting {
            border-color: var(--warning);
        }

        .customer.angry {
            border-color: var(--danger);
            animation: shake 0.5s infinite;
        }

        @keyframes shake {
            0% { transform: translateX(0); }
            25% { transform: translateX(-5px); }
            50% { transform: translateX(0); }
            75% { transform: translateX(5px); }
            100% { transform: translateX(0); }
        }

        .customer-avatar {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            background: #e9ecef;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
            margin: 0 auto 0.5rem;
        }

        .customer-order {
            text-align: center;
            margin-bottom: 0.5rem;
        }

        .customer-patience {
            height: 6px;
            background: #e9ecef;
            border-radius: 3px;
            overflow: hidden;
        }

        .customer-patience-bar {
            height: 100%;
            background: var(--success);
            transition: width 0.1s linear;
        }

        .customer.waiting .customer-patience-bar {
            background: var(--warning);
        }

        .customer.angry .customer-patience-bar {
            background: var(--danger);
        }

        .menu-tabs {
            display: flex;
            gap: 0.5rem;
            margin-bottom: 1rem;
            background: white;
            padding: 0.5rem;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
            overflow-x: auto;
        }

        .menu-tab {
            padding: 0.5rem 1rem;
            background: #e9ecef;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-weight: bold;
            transition: all 0.2s ease;
            white-space: nowrap;
        }

        .menu-tab.active {
            background: var(--primary);
            color: white;
        }

        .menu-content {
            background: white;
            border-radius: 8px;
            padding: 1rem;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
            display: none;
        }

        .menu-content.active {
            display: block;
        }

        .burn-storage-section {
            background: white;
            border-radius: 8px;
            padding: 1rem;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
            margin-bottom: 1rem;
        }

        .burn-storage-container {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(100px, 1fr));
            gap: 1rem;
            max-height: 300px;
            overflow-y: auto;
            padding: 1rem;
            background: #f8f9fa;
            border-radius: 8px;
        }

        .burn-storage-item {
            background: white;
            border: 2px solid var(--burn);
            border-radius: 8px;
            padding: 1rem;
            text-align: center;
            position: relative;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .burn-storage-item:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
        }

        .burn-storage-icon {
            font-size: 2rem;
            margin-bottom: 0.5rem;
            filter: grayscale(100%) brightness(0.5);
        }

        .burn-storage-name {
            font-weight: bold;
            font-size: 0.8rem;
            margin-bottom: 0.2rem;
        }

        .burn-storage-count {
            background: var(--burn);
            color: white;
            border-radius: 50%;
            width: 20px;
            height: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.7rem;
            position: absolute;
            top: -5px;
            right: -5px;
        }

        .burn-shop-section {
            background: white;
            border-radius: 8px;
            padding: 1rem;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
            margin-bottom: 1rem;
        }

        .burn-shop-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
            gap: 1rem;
        }

        .burn-shop-item {
            background: #f8f9fa;
            border-radius: 8px;
            padding: 1rem;
            text-align: center;
            border: 2px solid var(--burn);
            transition: all 0.2s ease;
        }

        .burn-shop-item:hover {
            border-color: var(--primary);
            transform: translateY(-2px);
        }

        .burn-shop-icon {
            font-size: 2rem;
            margin-bottom: 0.5rem;
            filter: grayscale(100%) brightness(0.5);
        }

        .burn-shop-name {
            font-weight: bold;
            margin-bottom: 0.5rem;
        }

        .burn-shop-price {
            color: var(--burn);
            font-weight: bold;
            margin-bottom: 0.5rem;
        }

        .burn-shop-button {
            width: 100%;
        }

        .shop-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
            gap: 1rem;
        }

        .shop-item {
            background: #f8f9fa;
            border-radius: 8px;
            padding: 1rem;
            text-align: center;
            border: 2px solid #dee2e6;
            transition: all 0.2s ease;
        }

        .shop-item:hover {
            border-color: var(--primary);
            transform: translateY(-2px);
        }

        .shop-item-icon {
            font-size: 2rem;
            margin-bottom: 0.5rem;
        }

        .shop-item-name {
            font-weight: bold;
            margin-bottom: 0.5rem;
        }

        .shop-item-price {
            color: var(--primary);
            font-weight: bold;
            margin-bottom: 0.5rem;
        }

        .shop-item-button {
            width: 100%;
        }

        .recipes-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 1rem;
        }

        .recipe-card {
            background: #f8f9fa;
            border-radius: 8px;
            padding: 1rem;
            border: 2px solid #dee2e6;
        }

        .recipe-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 0.5rem;
        }

        .recipe-name {
            font-weight: bold;
        }

        .recipe-status {
            font-size: 0.8rem;
            padding: 0.2rem 0.5rem;
            border-radius: 4px;
        }

        .recipe-status.unlocked {
            background: #d4edda;
            color: #155724;
        }

        .recipe-status.locked {
            background: #f8d7da;
            color: #721c24;
        }

        .recipe-ingredients {
            margin-bottom: 0.5rem;
        }

        .recipe-ingredient {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            margin-bottom: 0.2rem;
        }

        .level-map-container {
            display: flex;
            flex-direction: column;
            gap: 1rem;
        }

        .level-map-worlds {
            display: flex;
            gap: 0.5rem;
            overflow-x: auto;
            padding-bottom: 0.5rem;
        }

        .world-tab {
            padding: 0.5rem 1rem;
            background: #e9ecef;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-weight: bold;
            transition: all 0.2s ease;
            white-space: nowrap;
        }

        .world-tab.active {
            background: var(--primary);
            color: white;
        }

        .level-map {
            display: grid;
            grid-template-columns: repeat(10, 1fr);
            gap: 0.5rem;
        }

        .level-node {
            aspect-ratio: 1;
            background: #e9ecef;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .level-node.completed {
            background: var(--success);
            color: white;
        }

        .level-node.current {
            background: var(--primary);
            color: white;
            box-shadow: 0 0 10px rgba(255, 107, 53, 0.5);
        }

        .level-node.locked {
            background: #dee2e6;
            color: #6c757d;
            cursor: not-allowed;
        }

        .level-node.boss {
            background: var(--danger);
            color: white;
        }

        .level-node.boss.completed {
            background: var(--purple);
        }

        .level-node:hover:not(.locked) {
            transform: scale(1.1);
        }

        .leaderboard-table {
            width: 100%;
            border-collapse: collapse;
        }

        .leaderboard-table th,
        .leaderboard-table td {
            padding: 0.5rem;
            text-align: left;
            border-bottom: 1px solid #dee2e6;
        }

        .leaderboard-table th {
            background: #f8f9fa;
            font-weight: bold;
        }

        .leaderboard-table tr:hover {
            background: #f8f9fa;
        }

        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            z-index: 1000;
            align-items: center;
            justify-content: center;
        }

        .modal.active {
            display: flex;
        }

        .modal-content {
            background: white;
            border-radius: 8px;
            padding: 2rem;
            max-width: 500px;
            width: 90%;
            max-height: 90vh;
            overflow-y: auto;
        }

        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1rem;
        }

        .modal-title {
            font-size: 1.5rem;
            font-weight: bold;
        }

        .modal-close {
            background: none;
            border: none;
            font-size: 1.5rem;
            cursor: pointer;
        }

        .daily-rewards {
            display: grid;
            grid-template-columns: repeat(7, 1fr);
            gap: 1rem;
            margin-bottom: 1rem;
        }

        .daily-reward {
            background: #f8f9fa;
            border-radius: 8px;
            padding: 1rem;
            text-align: center;
            border: 2px solid #dee2e6;
        }

        .daily-reward.claimed {
            background: #d4edda;
            border-color: var(--success);
        }

        .daily-reward.today {
            border-color: var(--primary);
            box-shadow: 0 0 10px rgba(255, 107, 53, 0.3);
        }

        .daily-reward-icon {
            font-size: 1.5rem;
            margin-bottom: 0.5rem;
        }

        .daily-reward-day {
            font-weight: bold;
            margin-bottom: 0.5rem;
        }

        .daily-reward-amount {
            color: var(--primary);
            font-weight: bold;
        }

        .spin-wheel {
            width: 300px;
            height: 300px;
            border-radius: 50%;
            background: conic-gradient(
                #ff6b35 0deg 45deg,
                #f7931e 45deg 90deg,
                #ff6b35 90deg 135deg,
                #f7931e 135deg 180deg,
                #ff6b35 180deg 225deg,
                #f7931e 225deg 270deg,
                #ff6b35 270deg 315deg,
                #f7931e 315deg 360deg
            );
            position: relative;
            margin: 0 auto 2rem;
            transition: transform 4s cubic-bezier(0.2, 0.8, 0.2, 1);
        }

        .spin-wheel-pointer {
            position: absolute;
            top: -20px;
            left: 50%;
            transform: translateX(-50%);
            width: 0;
            height: 0;
            border-left: 15px solid transparent;
            border-right: 15px solid transparent;
            border-top: 30px solid var(--dark);
            z-index: 10;
        }

        .spin-wheel-center {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 60px;
            height: 60px;
            background: white;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.2);
        }

        .ad-container {
            background: #f8f9fa;
            border-radius: 8px;
            padding: 1rem;
            text-align: center;
            margin-bottom: 1rem;
        }

        .ad-button {
            background: var(--primary);
            color: white;
            border: none;
            border-radius: 4px;
            padding: 0.5rem 1rem;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.2s ease;
            margin: 0.25rem;
        }

        .ad-button:hover {
            background: #e85a2e;
        }

        .notification {
            position: fixed;
            top: 20px;
            right: 20px;
            background: white;
            border-radius: 8px;
            padding: 1rem;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            z-index: 1001;
            transform: translateX(120%);
            transition: transform 0.3s ease;
            max-width: 300px;
        }

        .notification.show {
            transform: translateX(0);
        }

        .notification-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 0.5rem;
        }

        .notification-title {
            font-weight: bold;
        }

        .notification-close {
            background: none;
            border: none;
            cursor: pointer;
        }

        .notification-message {
            color: var(--dark);
        }

        .intro-video {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: black;
            z-index: 2000;
            display: flex;
            align-items: center;
            justify-content: center;
            flex-direction: column;
        }

        .intro-video.hidden {
            display: none;
        }

        .intro-video-content {
            width: 80%;
            max-width: 800px;
            aspect-ratio: 16/9;
            background: #222;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 1.5rem;
            margin-bottom: 2rem;
            position: relative;
            overflow: hidden;
        }

        .intro-animation {
            position: absolute;
            width: 100%;
            height: 100%;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .oven-animation {
            width: 200px;
            height: 150px;
            background: #333;
            border-radius: 8px;
            position: relative;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .oven-door {
            position: absolute;
            bottom: 0;
            width: 80%;
            height: 60%;
            background: #555;
            border-radius: 8px 8px 0 0;
            transform-origin: bottom;
            animation: ovenDoor 4s infinite;
        }

        @keyframes ovenDoor {
            0%, 100% { transform: rotateX(0deg); }
            50% { transform: rotateX(-70deg); }
        }

        .oven-light {
            position: absolute;
            top: 10px;
            width: 30px;
            height: 30px;
            border-radius: 50%;
            background: #ff6b35;
            opacity: 0;
            animation: ovenLight 4s infinite;
        }

        @keyframes ovenLight {
            0%, 40%, 60%, 100% { opacity: 0; }
            50% { opacity: 1; }
        }

        .food-item {
            position: absolute;
            font-size: 1.5rem;
            animation: foodFloat 4s infinite;
        }

        @keyframes foodFloat {
            0%, 100% { transform: translateY(0); opacity: 0; }
            20%, 80% { transform: translateY(-30px); opacity: 1; }
        }

        .skip-button {
            background: var(--primary);
            color: white;
            border: none;
            border-radius: 4px;
            padding: 0.5rem 1rem;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .skip-button:hover {
            background: #e85a2e;
        }

        .multiplayer-section {
            background: white;
            border-radius: 8px;
            padding: 1rem;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
            margin-bottom: 1rem;
        }

        .multiplayer-lobby {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 1rem;
        }

        .player-card {
            background: #f8f9fa;
            border-radius: 8px;
            padding: 1rem;
            text-align: center;
            border: 2px solid #dee2e6;
        }

        .player-card.ready {
            border-color: var(--success);
        }

        .player-avatar {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            background: #e9ecef;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
            margin: 0 auto 0.5rem;
        }

        .player-name {
            font-weight: bold;
            margin-bottom: 0.5rem;
        }

        .player-status {
            font-size: 0.8rem;
            padding: 0.2rem 0.5rem;
            border-radius: 4px;
            display: inline-block;
        }

        .player-status.waiting {
            background: #fff3cd;
            color: #856404;
        }

        .player-status.ready {
            background: #d4edda;
            color: #155724;
        }

        .duel-arena {
            display: none;
            grid-template-columns: 1fr 1fr;
            gap: 1rem;
        }

        .duel-arena.active {
            display: grid;
        }

        .duel-player {
            background: #f8f9fa;
            border-radius: 8px;
            padding: 1rem;
        }

        .duel-player-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1rem;
        }

        .duel-player-name {
            font-weight: bold;
        }

        .duel-player-score {
            background: var(--primary);
            color: white;
            border-radius: 4px;
            padding: 0.2rem 0.5rem;
        }

        .duel-ovens {
            display: flex;
            gap: 0.5rem;
            margin-bottom: 1rem;
        }

        .duel-oven {
            flex: 1;
            height: 80px;
            background: #343a40;
            border-radius: 4px;
            position: relative;
        }

        .duel-timer {
            height: 6px;
            background: #e9ecef;
            border-radius: 3px;
            overflow: hidden;
            margin-bottom: 1rem;
        }

        .duel-timer-bar {
            height: 100%;
            background: var(--primary);
            width: 100%;
            transition: width 1s linear;
        }

        .health-pack {
            position: fixed;
            bottom: 20px;
            right: 20px;
            background: var(--success);
            color: white;
            border-radius: 50%;
            width: 60px;
            height: 60px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            cursor: pointer;
            transition: all 0.2s ease;
            z-index: 100;
        }

        .health-pack:hover {
            transform: scale(1.1);
        }

        .health-pack-count {
            position: absolute;
            top: -5px;
            right: -5px;
            background: var(--danger);
            color: white;
            border-radius: 50%;
            width: 24px;
            height: 24px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.8rem;
            font-weight: bold;
        }

        .gift-box {
            position: fixed;
            bottom: 90px;
            right: 20px;
            background: var(--warning);
            color: white;
            border-radius: 8px;
            width: 60px;
            height: 60px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            cursor: pointer;
            transition: all 0.2s ease;
            z-index: 100;
        }

        .gift-box:hover {
            transform: scale(1.1);
        }

        .gift-box-count {
            position: absolute;
            top: -5px;
            right: -5px;
            background: var(--danger);
            color: white;
            border-radius: 50%;
            width: 24px;
            height: 24px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.8rem;
            font-weight: bold;
        }

        .quick-shop {
            position: fixed;
            bottom: 160px;
            right: 20px;
            background: var(--info);
            color: white;
            border-radius: 8px;
            width: 60px;
            height: 60px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            cursor: pointer;
            transition: all 0.2s ease;
            z-index: 100;
        }

        .quick-shop:hover {
            transform: scale(1.1);
        }

        .quick-shop-modal {
            position: fixed;
            bottom: 230px;
            right: 20px;
            background: white;
            border-radius: 8px;
            padding: 1rem;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            width: 300px;
            display: none;
            z-index: 100;
        }

        .quick-shop-modal.active {
            display: block;
        }

        .quick-shop-items {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 0.5rem;
        }

        .quick-shop-item {
            background: #f8f9fa;
            border-radius: 4px;
            padding: 0.5rem;
            text-align: center;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .quick-shop-item:hover {
            background: #e9ecef;
        }

        .quick-shop-item-icon {
            font-size: 1.5rem;
            margin-bottom: 0.2rem;
        }

        .quick-shop-item-name {
            font-size: 0.8rem;
        }

        .toy-section {
            background: white;
            border-radius: 8px;
            padding: 1rem;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
            margin-bottom: 1rem;
        }

        .toys-container {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
            gap: 1rem;
        }

        .toy-item {
            background: #f8f9fa;
            border-radius: 8px;
            padding: 1rem;
            text-align: center;
            border: 2px solid #dee2e6;
            transition: all 0.2s ease;
        }

        .toy-item:hover {
            border-color: var(--primary);
            transform: translateY(-2px);
        }

        .toy-item-icon {
            font-size: 2rem;
            margin-bottom: 0.5rem;
        }

        .toy-item-name {
            font-weight: bold;
            margin-bottom: 0.5rem;
        }

        .toy-item-effect {
            color: var(--info);
            font-size: 0.8rem;
            margin-bottom: 0.5rem;
        }

        .toy-item-button {
            width: 100%;
        }

        .shop2-section {
            background: white;
            border-radius: 8px;
            padding: 1rem;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
            margin-bottom: 1rem;
        }

        .shop2-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
            gap: 1rem;
        }

        .shop2-item {
            background: #f8f9fa;
            border-radius: 8px;
            padding: 1rem;
            text-align: center;
            border: 2px solid #dee2e6;
            transition: all 0.2s ease;
        }

        .shop2-item:hover {
            border-color: var(--primary);
            transform: translateY(-2px);
        }

        .shop2-item-icon {
            font-size: 2rem;
            margin-bottom: 0.5rem;
        }

        .shop2-item-name {
            font-weight: bold;
            margin-bottom: 0.5rem;
        }

        .shop2-item-price {
            color: var(--primary);
            font-weight: bold;
            margin-bottom: 0.5rem;
        }

        .shop2-item-button {
            width: 100%;
        }

        .ad-rewards-section {
            background: white;
            border-radius: 8px;
            padding: 1rem;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
            margin-bottom: 1rem;
        }

        .ad-rewards-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 1rem;
        }

        .ad-reward-item {
            background: #f8f9fa;
            border-radius: 8px;
            padding: 1rem;
            text-align: center;
            border: 2px solid #dee2e6;
            transition: all 0.2s ease;
        }

        .ad-reward-item:hover {
            border-color: var(--primary);
            transform: translateY(-2px);
        }

        .ad-reward-icon {
            font-size: 2rem;
            margin-bottom: 0.5rem;
        }

        .ad-reward-name {
            font-weight: bold;
            margin-bottom: 0.5rem;
        }

        .ad-reward-reward {
            color: var(--primary);
            font-weight: bold;
            margin-bottom: 0.5rem;
        }

        .ad-reward-button {
            width: 100%;
        }

        .login-rewards-section {
            background: white;
            border-radius: 8px;
            padding: 1rem;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
            margin-bottom: 1rem;
        }

        .login-rewards-tabs {
            display: flex;
            gap: 0.5rem;
            margin-bottom: 1rem;
        }

        .login-rewards-tab {
            padding: 0.5rem 1rem;
            background: #e9ecef;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-weight: bold;
            transition: all 0.2s ease;
        }

        .login-rewards-tab.active {
            background: var(--primary);
            color: white;
        }

        .login-rewards-content {
            display: none;
        }

        .login-rewards-content.active {
            display: block;
        }

        .login-rewards-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
            gap: 1rem;
        }

        .login-reward-item {
            background: #f8f9fa;
            border-radius: 8px;
            padding: 1rem;
            text-align: center;
            border: 2px solid #dee2e6;
        }

        .login-reward-item.claimed {
            background: #d4edda;
            border-color: var(--success);
        }

        .login-reward-item.available {
            border-color: var(--primary);
            box-shadow: 0 0 10px rgba(255, 107, 53, 0.3);
        }

        .login-reward-icon {
            font-size: 1.5rem;
            margin-bottom: 0.5rem;
        }

        .login-reward-day {
            font-weight: bold;
            margin-bottom: 0.5rem;
        }

        .login-reward-amount {
            color: var(--primary);
            font-weight: bold;
            margin-bottom: 0.5rem;
        }

        .login-reward-button {
            width: 100%;
        }

        @media (max-width: 768px) {
            .game-stats {
                flex-wrap: wrap;
                gap: 0.5rem;
            }

            .ovens-container {
                grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
            }

            .level-map {
                grid-template-columns: repeat(5, 1fr);
            }

            .duel-arena {
                grid-template-columns: 1fr;
            }

            .daily-rewards {
                grid-template-columns: repeat(4, 1fr);
            }
        }

        @media (max-width: 480px) {
            .daily-rewards {
                grid-template-columns: repeat(2, 1fr);
            }
        }
    </style>
</head>
<body>
    <!-- Monetag SDK Integration -->
    <script src='//libtl.com/sdk.js' data-zone='9478329' data-sdk='show_9478329'></script>

    <!-- Intro Video -->
    <div class="intro-video" id="introVideo">
        <div class="intro-video-content">
            <div class="intro-animation">
                <div class="oven-animation">
                    <div class="oven-door"></div>
                    <div class="oven-light"></div>
                    <div class="food-item" style="top: 20%; left: 30%; animation-delay: 0s;">🍞</div>
                    <div class="food-item" style="top: 40%; left: 60%; animation-delay: 1s;">🥯</div>
                    <div class="food-item" style="top: 60%; left: 40%; animation-delay: 2s;">🌭</div>
                </div>
            </div>
        </div>
        <button class="skip-button" id="skipIntro">Skip Intro</button>
    </div>

    <!-- Header -->
    <header>
        <div class="logo">
            <span>🌭</span>
            <span>Sausages, Buns & Breads Master 4 – The Oven Revolution</span>
            <span>🍞</span>
        </div>
        <div>Created by Aakindumina</div>
    </header>

    <!-- Game Container -->
    <div class="game-container">
        <!-- Game Stats -->
        <div class="game-stats">
            <div class="stat-item">
                <i class="fas fa-coins"></i>
                <span>Coins: <span class="stat-value" id="coins">1000</span></span>
            </div>
            <div class="stat-item">
                <i class="fas fa-gem"></i>
                <span>Gems: <span class="stat-value" id="gems">10</span></span>
            </div>
            <div class="stat-item">
                <i class="fas fa-fire"></i>
                <span>Level: <span class="stat-value" id="level">1</span></span>
            </div>
            <div class="stat-item">
                <i class="fas fa-star"></i>
                <span>XP: <span class="stat-value" id="xp">0</span>/<span id="xpToNext">100</span></span>
            </div>
            <div class="stat-item">
                <i class="fas fa-heart"></i>
                <span>Health: <span class="stat-value" id="health">100</span>/<span id="maxHealth">100</span></span>
            </div>
            <div class="stat-item">
                <i class="fas fa-trophy"></i>
                <span>Score: <span class="stat-value" id="score">0</span></span>
            </div>
            <div class="stat-item">
                <i class="fas fa-fire-alt"></i>
                <span>Burnt: <span class="stat-value" id="burntCount">0</span></span>
            </div>
        </div>

        <!-- Menu Tabs -->
        <div class="menu-tabs">
            <button class="menu-tab active" data-tab="game">Game</button>
            <button class="menu-tab" data-tab="shop">Shop</button>
            <button class="menu-tab" data-tab="shop2">Shop 2</button>
            <button class="menu-tab" data-tab="burn-shop">Burn Shop</button>
            <button class="menu-tab" data-tab="burn-storage">Burn Storage</button>
            <button class="menu-tab" data-tab="recipes">Recipes</button>
            <button class="menu-tab" data-tab="levels">Levels</button>
            <button class="menu-tab" data-tab="toys">Toys</button>
            <button class="menu-tab" data-tab="multiplayer">Multiplayer</button>
            <button class="menu-tab" data-tab="leaderboard">Leaderboard</button>
            <button class="menu-tab" data-tab="ad-rewards">Ad Rewards</button>
            <button class="menu-tab" data-tab="login-rewards">Login Rewards</button>
            <button class="menu-tab" data-tab="about">About</button>
        </div>

        <!-- Game Area -->
        <div class="game-area">
            <!-- Game Tab -->
            <div class="menu-content active" id="game-tab">
                <!-- Ad Container -->
                <div class="ad-container">
                    <div>Watch an ad to get rewards!</div>
                    <button class="ad-button" id="watchAd">Watch Ad (100 Coins)</button>
                    <button class="ad-button" id="watchAdGems">Watch Ad (5 Gems)</button>
                </div>

                <!-- Customers Section -->
                <div class="customers-section">
                    <div class="section-header">
                        <h2 class="section-title">Customers</h2>
                        <button class="btn btn-primary" id="spawnCustomer">Spawn Customer</button>
                    </div>
                    <div class="customers-container" id="customersContainer">
                        <!-- Customers will be spawned here -->
                    </div>
                </div>

                <!-- Ovens Section -->
                <div class="ovens-section">
                    <div class="section-header">
                        <h2 class="section-title">Ovens</h2>
                        <button class="btn btn-primary" id="addOven">Add Oven</button>
                    </div>
                    <div class="ovens-container" id="ovensContainer">
                        <!-- Ovens will be added here -->
                    </div>
                </div>
            </div>

            <!-- Shop Tab -->
            <div class="menu-content" id="shop-tab">
                <div class="section-header">
                    <h2 class="section-title">Shop</h2>
                </div>
                <div class="shop-grid" id="shopGrid">
                    <!-- Shop items will be added here -->
                </div>
            </div>

            <!-- Shop 2 Tab -->
            <div class="menu-content" id="shop2-tab">
                <div class="section-header">
                    <h2 class="section-title">Shop 2 - Unlimited Items</h2>
                </div>
                <div class="shop2-grid" id="shop2Grid">
                    <!-- Shop 2 items will be added here -->
                </div>
            </div>

            <!-- Burn Shop Tab -->
            <div class="menu-content" id="burn-shop-tab">
                <div class="section-header">
                    <h2 class="section-title">Burn Shop - Buy & Sell Burnt Items</h2>
                </div>
                <div class="burn-shop-grid" id="burnShopGrid">
                    <!-- Burn shop items will be added here -->
                </div>
            </div>

            <!-- Burn Storage Tab -->
            <div class="menu-content" id="burn-storage-tab">
                <div class="section-header">
                    <h2 class="section-title">Burn Storage</h2>
                    <button class="btn btn-danger" id="clearBurnStorage">Clear All</button>
                </div>
                <div class="burn-storage-container" id="burnStorageContainer">
                    <!-- Burn storage items will be added here -->
                </div>
            </div>

            <!-- Recipes Tab -->
            <div class="menu-content" id="recipes-tab">
                <div class="section-header">
                    <h2 class="section-title">Recipe Book</h2>
                    <button class="btn btn-primary" id="addRecipe">Add New Recipe</button>
                </div>
                <div class="recipes-grid" id="recipesGrid">
                    <!-- Recipes will be added here -->
                </div>
            </div>

            <!-- Levels Tab -->
            <div class="menu-content" id="levels-tab">
                <div class="section-header">
                    <h2 class="section-title">Level Map</h2>
                </div>
                <div class="level-map-container">
                    <div class="level-map-worlds" id="levelMapWorlds">
                        <!-- World tabs will be added here -->
                    </div>
                    <div class="level-map" id="levelMap">
                        <!-- Level nodes will be added here -->
                    </div>
                </div>
            </div>

            <!-- Toys Tab -->
            <div class="menu-content" id="toys-tab">
                <div class="section-header">
                    <h2 class="section-title">Toys</h2>
                </div>
                <div class="toys-container" id="toysContainer">
                    <!-- Toys will be added here -->
                </div>
            </div>

            <!-- Multiplayer Tab -->
            <div class="menu-content" id="multiplayer-tab">
                <div class="section-header">
                    <h2 class="section-title">Oven Duels</h2>
                    <button class="btn btn-primary" id="findMatch">Find Match</button>
                </div>
                <div class="multiplayer-lobby" id="multiplayerLobby">
                    <!-- Players will be added here -->
                </div>
                <div class="duel-arena" id="duelArena">
                    <div class="duel-player">
                        <div class="duel-player-header">
                            <div class="duel-player-name">You</div>
                            <div class="duel-player-score">0</div>
                        </div>
                        <div class="duel-ovens">
                            <div class="duel-oven"></div>
                            <div class="duel-oven"></div>
                            <div class="duel-oven"></div>
                        </div>
                        <div class="duel-timer">
                            <div class="duel-timer-bar"></div>
                        </div>
                        <button class="btn btn-primary">Start Cooking</button>
                    </div>
                    <div class="duel-player">
                        <div class="duel-player-header">
                            <div class="duel-player-name">Opponent</div>
                            <div class="duel-player-score">0</div>
                        </div>
                        <div class="duel-ovens">
                            <div class="duel-oven"></div>
                            <div class="duel-oven"></div>
                            <div class="duel-oven"></div>
                        </div>
                        <div class="duel-timer">
                            <div class="duel-timer-bar"></div>
                        </div>
                        <button class="btn btn-primary" disabled>Waiting...</button>
                    </div>
                </div>
            </div>

            <!-- Leaderboard Tab -->
            <div class="menu-content" id="leaderboard-tab">
                <div class="section-header">
                    <h2 class="section-title">Global Leaderboard</h2>
                </div>
                <table class="leaderboard-table">
                    <thead>
                        <tr>
                            <th>Rank</th>
                            <th>Player</th>
                            <th>Level</th>
                            <th>Score</th>
                        </tr>
                    </thead>
                    <tbody id="leaderboardBody">
                        <!-- Leaderboard entries will be added here -->
                    </tbody>
                </table>
            </div>

            <!-- Ad Rewards Tab -->
            <div class="menu-content" id="ad-rewards-tab">
                <div class="section-header">
                    <h2 class="section-title">Ad Rewards</h2>
                </div>
                <div class="ad-rewards-grid" id="adRewardsGrid">
                    <!-- Ad rewards will be added here -->
                </div>
            </div>

            <!-- Login Rewards Tab -->
            <div class="menu-content" id="login-rewards-tab">
                <div class="section-header">
                    <h2 class="section-title">Login Rewards</h2>
                </div>
                <div class="login-rewards-tabs">
                    <button class="login-rewards-tab active" data-rewards="daily">Daily</button>
                    <button class="login-rewards-tab" data-rewards="weekly">Weekly</button>
                    <button class="login-rewards-tab" data-rewards="monthly">Monthly</button>
                    <button class="login-rewards-tab" data-rewards="yearly">Yearly</button>
                </div>
                <div class="login-rewards-content active" id="daily-rewards-content">
                    <div class="login-rewards-grid" id="dailyRewardsGrid">
                        <!-- Daily rewards will be added here -->
                    </div>
                </div>
                <div class="login-rewards-content" id="weekly-rewards-content">
                    <div class="login-rewards-grid" id="weeklyRewardsGrid">
                        <!-- Weekly rewards will be added here -->
                    </div>
                </div>
                <div class="login-rewards-content" id="monthly-rewards-content">
                    <div class="login-rewards-grid" id="monthlyRewardsGrid">
                        <!-- Monthly rewards will be added here -->
                    </div>
                </div>
                <div class="login-rewards-content" id="yearly-rewards-content">
                    <div class="login-rewards-grid" id="yearlyRewardsGrid">
                        <!-- Yearly rewards will be added here -->
                    </div>
                </div>
            </div>

            <!-- About Tab -->
            <div class="menu-content" id="about-tab">
                <div class="section-header">
                    <h2 class="section-title">About</h2>
                </div>
                <div>
                    <h3>Sausages, Buns & Breads Master 4 – The Oven Revolution</h3>
                    <p>Created by Aakindumina</p>
                    <p>Version 4.0</p>
                    <p>In this exciting sequel, manage multiple ovens, grills, and machines to create delicious sausages, buns, and breads. With 5000 levels, multiplayer battles, and endless customization options, become the ultimate Oven Master Tycoon!</p>
                    <h3>Features:</h3>
                    <ul>
                        <li>5000 levels of advanced cooking challenges</li>
                        <li>Multi-oven management system</li>
                        <li>Baking slots mechanic</li>
                        <li>Burn storage system for burnt items</li>
                        <li>Burn shop for buying and selling burnt items</li>
                        <li>Shop with upgrades and customizations</li>
                        <li>Multiplayer "Oven Duels" mode</li>
                        <li>Daily, weekly, monthly, and yearly rewards</li>
                        <li>Recipe system for creating new foods</li>
                        <li>Global leaderboard</li>
                        <li>Ad rewards system</li>
                        <li>Toys for gameplay enhancement</li>
                    </ul>
                </div>
            </div>
        </div>
    </div>

    <!-- Daily Rewards Modal -->
    <div class="modal" id="dailyRewardsModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 class="modal-title">Daily Rewards</h2>
                <button class="modal-close" id="closeDailyRewards">&times;</button>
            </div>
            <div class="daily-rewards" id="dailyRewards">
                <!-- Daily rewards will be added here -->
            </div>
            <button class="btn btn-primary" id="claimDailyReward">Claim Reward</button>
        </div>
    </div>

    <!-- Spin Wheel Modal -->
    <div class="modal" id="spinWheelModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 class="modal-title">Spin the Wheel</h2>
                <button class="modal-close" id="closeSpinWheel">&times;</button>
            </div>
            <div class="spin-wheel" id="spinWheel">
                <div class="spin-wheel-pointer"></div>
                <div class="spin-wheel-center">
                    <i class="fas fa-play"></i>
                </div>
            </div>
            <button class="btn btn-primary" id="spinButton">Spin (100 Coins)</button>
            <div class="ad-container">
                <div>Watch an ad for a free spin!</div>
                <button class="ad-button" id="freeSpinAd">Watch Ad</button>
            </div>
        </div>
    </div>

    <!-- Health Pack -->
    <div class="health-pack" id="healthPack">
        <i class="fas fa-heart"></i>
        <div class="health-pack-count" id="healthPackCount">3</div>
    </div>

    <!-- Gift Box -->
    <div class="gift-box" id="giftBox">
        <i class="fas fa-gift"></i>
        <div class="gift-box-count" id="giftBoxCount">1</div>
    </div>

    <!-- Quick Shop -->
    <div class="quick-shop" id="quickShop">
        <i class="fas fa-shopping-cart"></i>
    </div>
    <div class="quick-shop-modal" id="quickShopModal">
        <div class="quick-shop-items" id="quickShopItems">
            <!-- Quick shop items will be added here -->
        </div>
    </div>

    <!-- Notification -->
    <div class="notification" id="notification">
        <div class="notification-header">
            <div class="notification-title" id="notificationTitle">Notification</div>
            <button class="notification-close" id="notificationClose">&times;</button>
        </div>
        <div class="notification-message" id="notificationMessage">Message</div>
    </div>

    <script>
        // Game State
        const gameState = {
            coins: 1000,
            gems: 10,
            level: 1,
            xp: 0,
            xpToNext: 100,
            health: 100,
            maxHealth: 100,
            score: 0,
            ovens: [],
            customers: [],
            recipes: [
                { id: 1, name: "Basic Bread", ingredients: ["flour", "water", "yeast"], time: 3000, reward: 10, unlocked: true },
                { id: 2, name: "Sausage", ingredients: ["meat", "spices"], time: 4000, reward: 15, unlocked: true },
                { id: 3, name: "Bun", ingredients: ["flour", "water", "yeast", "sugar"], time: 2500, reward: 12, unlocked: true },
                { id: 4, name: "Hot Dog", ingredients: ["bun", "sausage", "ketchup"], time: 1000, reward: 20, unlocked: false },
                { id: 5, name: "Chocolate Bun", ingredients: ["bun", "chocolate"], time: 1500, reward: 25, unlocked: false }
            ],
            currentLevel: 1,
            completedLevels: [],
            leaderboard: [
                { rank: 1, name: "OvenMaster", level: 50, score: 10000 },
                { rank: 2, name: "BreadKing", level: 45, score: 8500 },
                { rank: 3, name: "SausageQueen", level: 42, score: 7800 },
                { rank: 4, name: "BunBoss", level: 40, score: 7200 },
                { rank: 5, name: "DoughDuke", level: 38, score: 6800 }
            ],
            healthPacks: 3,
            giftBoxes: 1,
            lastDailyReward: null,
            dailyRewardStreak: 0,
            lastWeeklyReward: null,
            weeklyRewardStreak: 0,
            lastMonthlyReward: null,
            monthlyRewardStreak: 0,
            lastYearlyReward: null,
            yearlyRewardStreak: 0,
            multiplayerActive: false,
            duelTimer: null,
            duelScore: { player: 0, opponent: 0 },
            toys: [],
            adRewards: [],
            spinCount: 0,
            lastAdWatch: null,
            worlds: [],
            currentWorld: 1,
            shop2Items: [],
            burntStorage: [],
            burntCount: 0,
            burnShopItems: []
        };

        // Generate 1000+ recipes
        const breadTypes = ["White", "Whole Wheat", "Sourdough", "Rye", "Multigrain", "Ciabatta", "Focaccia", "Baguette", "Pita", "Naan"];
        const bunTypes = ["Plain", "Sesame", "Poppy Seed", "Onion", "Garlic", "Cheese", "Jalapeno", "Cinnamon", "Chocolate", "Almond"];
        const sausageTypes = ["Pork", "Beef", "Chicken", "Turkey", "Vegetarian", "Spicy", "Cheese", "Herb", "Garlic", "Smoked"];
        const toppings = ["Ketchup", "Mustard", "Mayo", "Relish", "Onions", "Pickles", "Tomatoes", "Lettuce", "Cheese", "Bacon"];
        const extras = ["Chili", "Cheese Sauce", "Guacamole", "Salsa", "BBQ Sauce", "Ranch", "Hot Sauce", "Sour Cream", "Coleslaw", "Fried Onions"];

        // Generate 1000+ recipes
        for (let i = 6; i <= 1000; i++) {
            const bread = breadTypes[Math.floor(Math.random() * breadTypes.length)];
            const bun = bunTypes[Math.floor(Math.random() * bunTypes.length)];
            const sausage = sausageTypes[Math.floor(Math.random() * sausageTypes.length)];
            const topping = toppings[Math.floor(Math.random() * toppings.length)];
            const extra = extras[Math.floor(Math.random() * extras.length)];
            
            const recipeTypes = [
                { name: `${bread} Bread`, ingredients: [bread.toLowerCase(), "flour", "water", "yeast"] },
                { name: `${bun} Bun`, ingredients: [bun.toLowerCase(), "flour", "water", "yeast", "sugar"] },
                { name: `${sausage} Sausage`, ingredients: [sausage.toLowerCase(), "spices"] },
                { name: `${sausage} Hot Dog`, ingredients: ["bun", sausage.toLowerCase(), topping.toLowerCase()] },
                { name: `${bun} ${sausage} Deluxe`, ingredients: [bun.toLowerCase(), sausage.toLowerCase(), topping.toLowerCase(), extra.toLowerCase()] },
                { name: `${bread} ${sausage} Sandwich`, ingredients: [bread.toLowerCase(), sausage.toLowerCase(), topping.toLowerCase(), extra.toLowerCase()] },
                { name: `${bun} with ${topping}`, ingredients: [bun.toLowerCase(), topping.toLowerCase()] },
                { name: `${sausage} with ${extra}`, ingredients: [sausage.toLowerCase(), extra.toLowerCase()] },
                { name: `${bread} with ${topping}`, ingredients: [bread.toLowerCase(), topping.toLowerCase()] },
                { name: `${bun} ${sausage} ${topping}`, ingredients: [bun.toLowerCase(), sausage.toLowerCase(), topping.toLowerCase()] }
            ];
            
            const recipeType = recipeTypes[Math.floor(Math.random() * recipeTypes.length)];
            
            gameState.recipes.push({
                id: i,
                name: recipeType.name,
                ingredients: recipeType.ingredients,
                time: Math.floor(Math.random() * 5000) + 1000,
                reward: Math.floor(Math.random() * 50) + 10,
                unlocked: i <= 10 // First 10 recipes are unlocked by default
            });
        }

        // Generate 5000 levels
        for (let w = 1; w <= 10; w++) {
            const world = {
                id: w,
                name: `World ${w}`,
                levels: []
            };
            
            const levelsPerWorld = 500;
            for (let l = 1; l <= levelsPerWorld; l++) {
                const levelId = (w - 1) * levelsPerWorld + l;
                const isBoss = l % 50 === 0;
                
                world.levels.push({
                    id: levelId,
                    world: w,
                    number: l,
                    name: isBoss ? `Boss ${w}-${l}` : `Level ${w}-${l}`,
                    difficulty: Math.ceil(l / 50),
                    isBoss: isBoss,
                    reward: isBoss ? 100 * w : 10 * w,
                    unlocked: levelId === 1 || gameState.completedLevels.includes(levelId - 1),
                    completed: gameState.completedLevels.includes(levelId)
                });
            }
            
            gameState.worlds.push(world);
        }

        // Generate toys
        const toyTypes = [
            { name: "Chef Hat", icon: "👨‍🍳", effect: "Increase cooking speed by 10%", price: 500 },
            { name: "Apron", icon: "👕", effect: "Increase customer patience by 20%", price: 300 },
            { name: "Rolling Pin", icon: "🔨", effect: "Decrease cooking time by 15%", price: 400 },
            { name: "Oven Mitts", icon: "🧤", effect: "Prevent burning", price: 600 },
            { name: "Timer", icon: "⏱️", effect: "Show exact cooking time", price: 350 },
            { name: "Recipe Book", icon: "📖", effect: "Unlock 5 random recipes", price: 700 },
            { name: "Golden Spatula", icon: "🥄", effect: "Increase rewards by 25%", price: 1000 },
            { name: "Magic Oven", icon: "🔮", effect: "Instant cooking", price: 2000 },
            { name: "Customer Magnet", icon: "🧲", effect: "Attract more customers", price: 800 },
            { name: "Health Booster", icon: "❤️", effect: "Increase max health by 50", price: 450 }
        ];

        // Generate 1000+ toys
        for (let i = 0; i < 1000; i++) {
            const baseToy = toyTypes[i % toyTypes.length];
            const rarity = Math.floor(i / 100) + 1;
            
            gameState.toys.push({
                id: i + 1,
                name: `${baseToy.name} ${rarity > 1 ? `(Tier ${rarity})` : ''}`,
                icon: baseToy.icon,
                effect: baseToy.effect,
                price: baseToy.price * rarity,
                rarity: rarity,
                owned: false
            });
        }

        // Generate shop 2 items
        const shop2ItemTypes = [
            { name: "Coin Pack", icon: "🪙", price: 100, reward: 1000, type: "coins" },
            { name: "Gem Pack", icon: "💎", price: 100, reward: 10, type: "gems" },
            { name: "Health Pack", icon: "❤️", price: 50, reward: 1, type: "health" },
            { name: "XP Booster", icon: "⭐", price: 200, reward: 500, type: "xp" },
            { name: "Oven Upgrade", icon: "🔥", price: 500, reward: 1, type: "oven" },
            { name: "Slot Expansion", icon: "📦", price: 300, reward: 1, type: "slot" },
            { name: "Speed Booster", icon: "⚡", price: 400, reward: 1, type: "speed" },
            { name: "Gift Box", icon: "🎁", price: 150, reward: 1, type: "gift" },
            { name: "Spin Token", icon: "🎰", price: 100, reward: 1, type: "spin" },
            { name: "Recipe Unlock", icon: "📜", price: 250, reward: 5, type: "recipe" }
        ];

        // Generate 1000+ shop 2 items
        for (let i = 0; i < 1000; i++) {
            const baseItem = shop2ItemTypes[i % shop2ItemTypes.length];
            const multiplier = Math.floor(i / 100) + 1;
            
            gameState.shop2Items.push({
                id: i + 1,
                name: `${baseItem.name} ${multiplier > 1 ? `(${multiplier}x)` : ''}`,
                icon: baseItem.icon,
                price: baseItem.price * multiplier,
                reward: baseItem.reward * multiplier,
                type: baseItem.type
            });
        }

        // Generate burn shop items
        const burnShopItemTypes = [
            { name: "Burnt Bread", icon: "🍞", buyPrice: 5, sellPrice: 2, type: "burnt" },
            { name: "Burnt Bun", icon: "🥯", buyPrice: 6, sellPrice: 3, type: "burnt" },
            { name: "Burnt Sausage", icon: "🌭", buyPrice: 8, sellPrice: 4, type: "burnt" },
            { name: "Burnt Hot Dog", icon: "🌭", buyPrice: 10, sellPrice: 5, type: "burnt" },
            { name: "Burnt Chocolate Bun", icon: "🍫", buyPrice: 12, sellPrice: 6, type: "burnt" },
            { name: "Burnt Recipe", icon: "📜", buyPrice: 50, sellPrice: 0, type: "recipe" },
            { name: "Anti-Burn Spray", icon: "🧴", buyPrice: 100, sellPrice: 0, type: "upgrade" },
            { name: "Burnt Oven", icon: "🔥", buyPrice: 500, sellPrice: 0, type: "oven" },
            { name: "Burnt Collector", icon: "🗑️", buyPrice: 200, sellPrice: 0, type: "tool" },
            { name: "Burnt Converter", icon: "♻️", buyPrice: 300, sellPrice: 0, type: "tool" }
        ];

        // Generate 100+ burn shop items
        for (let i = 0; i < 100; i++) {
            const baseItem = burnShopItemTypes[i % burnShopItemTypes.length];
            const multiplier = Math.floor(i / 10) + 1;
            
            gameState.burnShopItems.push({
                id: i + 1,
                name: `${baseItem.name} ${multiplier > 1 ? `(${multiplier}x)` : ''}`,
                icon: baseItem.icon,
                buyPrice: baseItem.buyPrice * multiplier,
                sellPrice: baseItem.sellPrice * multiplier,
                type: baseItem.type
            });
        }

        // Generate ad rewards
        const adRewardTypes = [
            { name: "Daily Ad", icon: "📅", reward: 100, type: "coins", cooldown: "24h" },
            { name: "Weekly Ad", icon: "📆", reward: 1000, type: "coins", cooldown: "7d" },
            { name: "Monthly Ad", icon: "📅", reward: 10000, type: "coins", cooldown: "30d" },
            { name: "Yearly Ad", icon: "📅", reward: 100000, type: "coins", cooldown: "365d" },
            { name: "Gem Ad", icon: "💎", reward: 5, type: "gems", cooldown: "24h" },
            { name: "Spin Ad", icon: "🎰", reward: 1, type: "spin", cooldown: "12h" },
            { name: "Health Ad", icon: "❤️", reward: 1, type: "health", cooldown: "6h" },
            { name: "XP Ad", icon: "⭐", reward: 100, type: "xp", cooldown: "12h" },
            { name: "Gift Ad", icon: "🎁", reward: 1, type: "gift", cooldown: "24h" },
            { name: "Recipe Ad", icon: "📜", reward: 1, type: "recipe", cooldown: "48h" }
        ];

        // Generate 100+ ad rewards
        for (let i = 0; i < 100; i++) {
            const baseReward = adRewardTypes[i % adRewardTypes.length];
            const multiplier = Math.floor(i / 10) + 1;
            
            gameState.adRewards.push({
                id: i + 1,
                name: `${baseReward.name} ${multiplier > 1 ? `(${multiplier}x)` : ''}`,
                icon: baseReward.icon,
                reward: baseReward.reward * multiplier,
                type: baseReward.type,
                cooldown: baseReward.cooldown,
                lastWatch: null,
                available: true
            });
        }

        // DOM Elements
        const elements = {
            coins: document.getElementById('coins'),
            gems: document.getElementById('gems'),
            level: document.getElementById('level'),
            xp: document.getElementById('xp'),
            xpToNext: document.getElementById('xpToNext'),
            health: document.getElementById('health'),
            maxHealth: document.getElementById('maxHealth'),
            score: document.getElementById('score'),
            burntCount: document.getElementById('burntCount'),
            ovensContainer: document.getElementById('ovensContainer'),
            customersContainer: document.getElementById('customersContainer'),
            shopGrid: document.getElementById('shopGrid'),
            shop2Grid: document.getElementById('shop2Grid'),
            burnShopGrid: document.getElementById('burnShopGrid'),
            burnStorageContainer: document.getElementById('burnStorageContainer'),
            recipesGrid: document.getElementById('recipesGrid'),
            levelMap: document.getElementById('levelMap'),
            levelMapWorlds: document.getElementById('levelMapWorlds'),
            toysContainer: document.getElementById('toysContainer'),
            multiplayerLobby: document.getElementById('multiplayerLobby'),
            duelArena: document.getElementById('duelArena'),
            leaderboardBody: document.getElementById('leaderboardBody'),
            dailyRewardsModal: document.getElementById('dailyRewardsModal'),
            dailyRewards: document.getElementById('dailyRewards'),
            spinWheelModal: document.getElementById('spinWheelModal'),
            spinWheel: document.getElementById('spinWheel'),
            notification: document.getElementById('notification'),
            notificationTitle: document.getElementById('notificationTitle'),
            notificationMessage: document.getElementById('notificationMessage'),
            healthPack: document.getElementById('healthPack'),
            healthPackCount: document.getElementById('healthPackCount'),
            giftBox: document.getElementById('giftBox'),
            giftBoxCount: document.getElementById('giftBoxCount'),
            quickShop: document.getElementById('quickShop'),
            quickShopModal: document.getElementById('quickShopModal'),
            quickShopItems: document.getElementById('quickShopItems'),
            introVideo: document.getElementById('introVideo'),
            adRewardsGrid: document.getElementById('adRewardsGrid'),
            dailyRewardsGrid: document.getElementById('dailyRewardsGrid'),
            weeklyRewardsGrid: document.getElementById('weeklyRewardsGrid'),
            monthlyRewardsGrid: document.getElementById('monthlyRewardsGrid'),
            yearlyRewardsGrid: document.getElementById('yearlyRewardsGrid')
        };

        // Initialize Game
        function initGame() {
            updateUI();
            createInitialOvens();
            setupEventListeners();
            populateShop();
            populateShop2();
            populateBurnShop();
            populateRecipes();
            populateLevelMap();
            populateToys();
            populateLeaderboard();
            populateQuickShop();
            populateAdRewards();
            populateLoginRewards();
            setupDailyRewards();
            checkDailyReward();
            populateBurnStorage();
            
            // Show intro video
            setTimeout(() => {
                elements.introVideo.classList.add('hidden');
            }, 5000);
        }

        // Update UI
        function updateUI() {
            elements.coins.textContent = gameState.coins;
            elements.gems.textContent = gameState.gems;
            elements.level.textContent = gameState.level;
            elements.xp.textContent = gameState.xp;
            elements.xpToNext.textContent = gameState.xpToNext;
            elements.health.textContent = gameState.health;
            elements.maxHealth.textContent = gameState.maxHealth;
            elements.score.textContent = gameState.score;
            elements.burntCount.textContent = gameState.burntCount;
            elements.healthPackCount.textContent = gameState.healthPacks;
            elements.giftBoxCount.textContent = gameState.giftBoxes;
        }

        // Create Initial Ovens
        function createInitialOvens() {
            for (let i = 0; i < 2; i++) {
                addOven();
            }
        }

        // Add Oven
        function addOven() {
            const ovenId = Date.now();
            const oven = {
                id: ovenId,
                name: `Oven ${gameState.ovens.length + 1}`,
                level: 1,
                slots: 2,
                active: false,
                items: []
            };
            
            gameState.ovens.push(oven);
            renderOven(oven);
        }

        // Render Oven
        function renderOven(oven) {
            const ovenElement = document.createElement('div');
            ovenElement.className = 'oven';
            ovenElement.id = `oven-${oven.id}`;
            
            ovenElement.innerHTML = `
                <div class="oven-header">
                    <div class="oven-name">${oven.name}</div>
                    <div class="oven-level">${oven.level}</div>
                </div>
                <div class="oven-display">
                    <div class="oven-glow"></div>
                </div>
                <div class="oven-slots" id="slots-${oven.id}">
                    ${Array(oven.slots).fill().map((_, i) => `
                        <div class="oven-slot" data-slot="${i}">
                            <div class="slot-progress"></div>
                        </div>
                    `).join('')}
                </div>
                <div class="oven-controls">
                    <button class="btn btn-primary start-oven" data-oven="${oven.id}">Start</button>
                    <button class="btn btn-secondary stop-oven" data-oven="${oven.id}">Stop</button>
                    <button class="btn btn-success upgrade-oven" data-oven="${oven.id}">Upgrade</button>
                </div>
            `;
            
            elements.ovensContainer.appendChild(ovenElement);
            
            // Add event listeners
            ovenElement.querySelector('.start-oven').addEventListener('click', () => startOven(oven.id));
            ovenElement.querySelector('.stop-oven').addEventListener('click', () => stopOven(oven.id));
            ovenElement.querySelector('.upgrade-oven').addEventListener('click', () => upgradeOven(oven.id));
            
            // Add slot click listeners
            const slots = ovenElement.querySelectorAll('.oven-slot');
            slots.forEach(slot => {
                slot.addEventListener('click', () => addToOven(oven.id, parseInt(slot.dataset.slot)));
            });
        }

        // Start Oven
        function startOven(ovenId) {
            const oven = gameState.ovens.find(o => o.id === ovenId);
            if (!oven || oven.active) return;
            
            oven.active = true;
            const ovenElement = document.getElementById(`oven-${ovenId}`);
            ovenElement.classList.add('active');
            
            // Process items in oven
            oven.items.forEach((item, index) => {
                if (item && !item.processing) {
                    item.processing = true;
                    item.startTime = Date.now();
                    
                    const slotElement = ovenElement.querySelector(`[data-slot="${index}"]`);
                    const progressElement = slotElement.querySelector('.slot-progress');
                    
                    const interval = setInterval(() => {
                        const elapsed = Date.now() - item.startTime;
                        const progress = Math.min(100, (elapsed / item.time) * 100);
                        
                        progressElement.style.width = `${progress}%`;
                        
                        // Check if item is burnt (overcooked by 50%)
                        if (progress > 150) {
                            clearInterval(interval);
                            slotElement.classList.add('burnt');
                            item.burnt = true;
                            item.done = true;
                            
                            // Add to burnt storage
                            addToBurnStorage(item.recipe);
                            
                            // Auto-remove after 3 seconds
                            setTimeout(() => {
                                removeFromOven(ovenId, index);
                            }, 3000);
                        } else if (progress >= 100) {
                            clearInterval(interval);
                            slotElement.classList.add('done');
                            item.done = true;
                            
                            // Auto-remove after 3 seconds
                            setTimeout(() => {
                                removeFromOven(ovenId, index);
                            }, 3000);
                        }
                    }, 100);
                }
            });
        }

        // Stop Oven
        function stopOven(ovenId) {
            const oven = gameState.ovens.find(o => o.id === ovenId);
            if (!oven || !oven.active) return;
            
            oven.active = false;
            const ovenElement = document.getElementById(`oven-${ovenId}`);
            ovenElement.classList.remove('active');
            
            // Stop processing items
            oven.items.forEach(item => {
                if (item && item.processing) {
                    item.processing = false;
                }
            });
        }

        // Upgrade Oven
        function upgradeOven(ovenId) {
            const oven = gameState.ovens.find(o => o.id === ovenId);
            if (!oven) return;
            
            const cost = oven.level * 100;
            if (gameState.coins < cost) {
                showNotification("Not enough coins!", "error");
                return;
            }
            
            gameState.coins -= cost;
            oven.level++;
            
            // Add slot every 2 levels
            if (oven.level % 2 === 0) {
                oven.slots++;
                oven.items.push(null);
                
                // Add new slot to UI
                const slotsContainer = document.getElementById(`slots-${ovenId}`);
                const newSlot = document.createElement('div');
                newSlot.className = 'oven-slot';
                newSlot.dataset.slot = oven.slots - 1;
                newSlot.innerHTML = '<div class="slot-progress"></div>';
                newSlot.addEventListener('click', () => addToOven(ovenId, oven.slots - 1));
                slotsContainer.appendChild(newSlot);
            }
            
            // Update UI
            const ovenElement = document.getElementById(`oven-${ovenId}`);
            ovenElement.querySelector('.oven-level').textContent = oven.level;
            
            updateUI();
            showNotification(`${oven.name} upgraded to level ${oven.level}!`, "success");
        }

        // Add to Oven
        function addToOven(ovenId, slotIndex) {
            const oven = gameState.ovens.find(o => o.id === ovenId);
            if (!oven || oven.items[slotIndex]) return;
            
            // For simplicity, we'll add a random item
            const availableRecipes = gameState.recipes.filter(r => r.unlocked);
            if (availableRecipes.length === 0) return;
            
            const recipe = availableRecipes[Math.floor(Math.random() * availableRecipes.length)];
            const item = {
                recipe: recipe,
                time: recipe.time,
                processing: false,
                done: false,
                burnt: false
            };
            
            oven.items[slotIndex] = item;
            
            // Update UI
            const ovenElement = document.getElementById(`oven-${ovenId}`);
            const slotElement = ovenElement.querySelector(`[data-slot="${slotIndex}"]`);
            slotElement.classList.add('occupied');
            
            // Add item icon
            const itemIcon = document.createElement('div');
            itemIcon.className = 'slot-item';
            itemIcon.textContent = getRecipeIcon(recipe.name);
            slotElement.appendChild(itemIcon);
        }

        // Remove from Oven
        function removeFromOven(ovenId, slotIndex) {
            const oven = gameState.ovens.find(o => o.id === ovenId);
            if (!oven || !oven.items[slotIndex]) return;
            
            const item = oven.items[slotIndex];
            if (item.done) {
                if (!item.burnt) {
                    // Give reward for properly cooked item
                    gameState.coins += item.recipe.reward;
                    gameState.score += item.recipe.reward;
                    gainXP(5);
                    
                    // Check if any customer is waiting for this item
                    checkCustomerOrders(item.recipe);
                } else {
                    // Item is burnt
                    gameState.burntCount++;
                    updateUI();
                }
            }
            
            oven.items[slotIndex] = null;
            
            // Update UI
            const ovenElement = document.getElementById(`oven-${ovenId}`);
            const slotElement = ovenElement.querySelector(`[data-slot="${slotIndex}"]`);
            slotElement.classList.remove('occupied', 'done', 'burnt');
            slotElement.innerHTML = '<div class="slot-progress"></div>';
            
            updateUI();
        }

        // Add to Burn Storage
        function addToBurnStorage(recipe) {
            // Check if item already exists in storage
            const existingItem = gameState.burntStorage.find(item => item.name === recipe.name);
            
            if (existingItem) {
                existingItem.count++;
            } else {
                gameState.burntStorage.push({
                    id: Date.now(),
                    name: recipe.name,
                    icon: getRecipeIcon(recipe.name),
                    count: 1,
                    sellPrice: Math.floor(recipe.reward * 0.3) // 30% of original value
                });
            }
            
            updateUI();
            populateBurnStorage();
        }

        // Populate Burn Storage
        function populateBurnStorage() {
            elements.burnStorageContainer.innerHTML = '';
            
            if (gameState.burntStorage.length === 0) {
                elements.burnStorageContainer.innerHTML = '<div style="text-align: center; color: #6c757d;">No burnt items in storage</div>';
                return;
            }
            
            gameState.burntStorage.forEach(item => {
                const itemElement = document.createElement('div');
                itemElement.className = 'burn-storage-item';
                itemElement.innerHTML = `
                    <div class="burn-storage-icon">${item.icon}</div>
                    <div class="burn-storage-name">${item.name}</div>
                    <div class="burn-storage-count">${item.count}</div>
                `;
                
                itemElement.addEventListener('click', () => sellBurntItem(item));
                elements.burnStorageContainer.appendChild(itemElement);
            });
        }

        // Sell Burnt Item
        function sellBurntItem(item) {
            if (item.count <= 0) return;
            
            const totalValue = item.sellPrice * item.count;
            gameState.coins += totalValue;
            gameState.score += Math.floor(totalValue / 2);
            
            // Remove item from storage
            const index = gameState.burntStorage.indexOf(item);
            if (index > -1) {
                gameState.burntStorage.splice(index, 1);
            }
            
            updateUI();
            populateBurnStorage();
            showNotification(`Sold ${item.name} for ${totalValue} coins!`, "success");
        }

        // Clear Burn Storage
        function clearBurnStorage() {
            if (gameState.burntStorage.length === 0) {
                showNotification("No burnt items to clear!", "info");
                return;
            }
            
            if (confirm("Are you sure you want to clear all burnt items?")) {
                gameState.burntStorage = [];
                updateUI();
                populateBurnStorage();
                showNotification("Burn storage cleared!", "success");
            }
        }

        // Populate Burn Shop
        function populateBurnShop() {
            // Show first 20 items, with pagination
            const itemsToShow = gameState.burnShopItems.slice(0, 20);
            
            itemsToShow.forEach(item => {
                const itemElement = document.createElement('div');
                itemElement.className = 'burn-shop-item';
                itemElement.innerHTML = `
                    <div class="burn-shop-icon">${item.icon}</div>
                    <div class="burn-shop-name">${item.name}</div>
                    <div class="burn-shop-price">Buy: ${item.buyPrice} coins</div>
                    ${item.sellPrice > 0 ? `<div class="burn-shop-price">Sell: ${item.sellPrice} coins</div>` : ''}
                    <button class="btn btn-burn burn-shop-button" data-item="${item.id}">Buy</button>
                    ${item.sellPrice > 0 ? `<button class="btn btn-danger burn-shop-button" data-item="${item.id}" data-action="sell">Sell</button>` : ''}
                `;
                
                elements.burnShopGrid.appendChild(itemElement);
                
                // Add event listeners
                itemElement.querySelector('.burn-shop-button[data-action="sell"]')?.addEventListener('click', () => sellBurnShopItem(item));
                itemElement.querySelector('.burn-shop-button:not([data-action])')?.addEventListener('click', () => buyBurnShopItem(item));
            });
        }

        // Buy Burn Shop Item
        function buyBurnShopItem(item) {
            if (gameState.coins < item.buyPrice) {
                showNotification("Not enough coins!", "error");
                return;
            }
            
            gameState.coins -= item.buyPrice;
            
            // Apply item effect
            switch (item.type) {
                case "burnt":
                    // Add burnt item to storage
                    const existingItem = gameState.burntStorage.find(storageItem => storageItem.name === item.name);
                    if (existingItem) {
                        existingItem.count++;
                    } else {
                        gameState.burntStorage.push({
                            id: Date.now(),
                            name: item.name,
                            icon: item.icon,
                            count: 1,
                            sellPrice: item.sellPrice
                        });
                    }
                    showNotification(`Bought ${item.name}!`, "success");
                    populateBurnStorage();
                    break;
                case "recipe":
                    // Unlock random recipe
                    const lockedRecipes = gameState.recipes.filter(r => !r.unlocked);
                    if (lockedRecipes.length > 0) {
                        const recipeToUnlock = lockedRecipes[Math.floor(Math.random() * lockedRecipes.length)];
                        recipeToUnlock.unlocked = true;
                        showNotification(`New recipe unlocked: ${recipeToUnlock.name}!`, "success");
                        populateRecipes();
                    } else {
                        showNotification("All recipes already unlocked!", "info");
                    }
                    break;
                case "upgrade":
                    // Apply upgrade effect
                    showNotification(`${item.name} applied!`, "success");
                    break;
                case "oven":
                    addOven();
                    showNotification("New oven added!", "success");
                    break;
                case "tool":
                    // Add tool to inventory
                    showNotification(`${item.name} added to inventory!`, "success");
                    break;
            }
            
            updateUI();
        }

        // Sell Burn Shop Item
        function sellBurnShopItem(item) {
            if (item.sellPrice === 0) return;
            
            // Check if player has the item to sell
            const playerItem = gameState.burntStorage.find(storageItem => storageItem.name === item.name);
            
            if (!playerItem || playerItem.count <= 0) {
                showNotification(`You don't have any ${item.name} to sell!`, "error");
                return;
            }
            
            const totalValue = item.sellPrice;
            gameState.coins += totalValue;
            gameState.score += Math.floor(totalValue / 2);
            
            // Remove one item from storage
            playerItem.count--;
            if (playerItem.count <= 0) {
                const index = gameState.burntStorage.indexOf(playerItem);
                if (index > -1) {
                    gameState.burntStorage.splice(index, 1);
                }
            }
            
            updateUI();
            populateBurnStorage();
            showNotification(`Sold ${item.name} for ${totalValue} coins!`, "success");
        }

        // Get Recipe Icon
        function getRecipeIcon(recipeName) {
            if (recipeName.includes("Bread")) return "🍞";
            if (recipeName.includes("Bun")) return "🥯";
            if (recipeName.includes("Sausage")) return "🌭";
            if (recipeName.includes("Hot Dog")) return "🌭";
            if (recipeName.includes("Chocolate")) return "🍫";
            return "🍽️";
        }

        // Spawn Customer
        function spawnCustomer() {
            const customer = {
                id: Date.now(),
                name: `Customer ${gameState.customers.length + 1}`,
                order: getRandomOrder(),
                patience: 100,
                maxPatience: 100,
                satisfied: false
            };
            
            gameState.customers.push(customer);
            renderCustomer(customer);
            
            // Start patience timer
            const patienceInterval = setInterval(() => {
                customer.patience -= 2;
                
                const customerElement = document.getElementById(`customer-${customer.id}`);
                const patienceBar = customerElement.querySelector('.customer-patience-bar');
                patienceBar.style.width = `${(customer.patience / customer.maxPatience) * 100}%`;
                
                if (customer.patience <= 30) {
                    customerElement.classList.add('angry');
                } else if (customer.patience <= 60) {
                    customerElement.classList.add('waiting');
                }
                
                if (customer.patience <= 0 || customer.satisfied) {
                    clearInterval(patienceInterval);
                    
                    if (customer.patience <= 0 && !customer.satisfied) {
                        // Customer left unsatisfied
                        gameState.health -= 10;
                        updateUI();
                        showNotification(`${customer.name} left unsatisfied!`, "error");
                        
                        if (gameState.health <= 0) {
                            gameOver();
                        }
                    }
                    
                    // Remove customer after a delay
                    setTimeout(() => {
                        removeCustomer(customer.id);
                    }, 1000);
                }
            }, 200);
        }

        // Get Random Order
        function getRandomOrder() {
            const availableRecipes = gameState.recipes.filter(r => r.unlocked);
            if (availableRecipes.length === 0) return null;
            
            const recipeCount = Math.min(3, Math.floor(Math.random() * 3) + 1);
            const order = [];
            
            for (let i = 0; i < recipeCount; i++) {
                const recipe = availableRecipes[Math.floor(Math.random() * availableRecipes.length)];
                order.push(recipe);
            }
            
            return order;
        }

        // Render Customer
        function renderCustomer(customer) {
            const customerElement = document.createElement('div');
            customerElement.className = 'customer';
            customerElement.id = `customer-${customer.id}`;
            
            const orderText = customer.order.map(r => getRecipeIcon(r.name)).join(' ');
            
            customerElement.innerHTML = `
                <div class="customer-avatar">
                    <i class="fas fa-user"></i>
                </div>
                <div class="customer-order">${orderText}</div>
                <div class="customer-patience">
                    <div class="customer-patience-bar" style="width: 100%"></div>
                </div>
            `;
            
            elements.customersContainer.appendChild(customerElement);
        }

        // Remove Customer
        function removeCustomer(customerId) {
            gameState.customers = gameState.customers.filter(c => c.id !== customerId);
            const customerElement = document.getElementById(`customer-${customerId}`);
            if (customerElement) {
                customerElement.remove();
            }
        }

        // Check Customer Orders
        function checkCustomerOrders(recipe) {
            gameState.customers.forEach(customer => {
                if (customer.satisfied) return;
                
                const orderIndex = customer.order.findIndex(r => r.id === recipe.id);
                if (orderIndex !== -1) {
                    // Customer got what they wanted
                    customer.order.splice(orderIndex, 1);
                    
                    if (customer.order.length === 0) {
                        // Customer's order is complete
                        customer.satisfied = true;
                        gameState.coins += 20;
                        gameState.score += 20;
                        gainXP(10);
                        
                        const customerElement = document.getElementById(`customer-${customer.id}`);
                        customerElement.classList.remove('waiting', 'angry');
                        
                        showNotification(`${customer.name} is satisfied!`, "success");
                    }
                }
            });
        }

        // Gain XP
        function gainXP(amount) {
            gameState.xp += amount;
            
            while (gameState.xp >= gameState.xpToNext) {
                gameState.xp -= gameState.xpToNext;
                gameState.level++;
                gameState.xpToNext = gameState.level * 100;
                
                showNotification(`Level up! You are now level ${gameState.level}`, "success");
                
                // Unlock new recipes at certain levels
                if (gameState.level === 5 && !gameState.recipes[3].unlocked) {
                    gameState.recipes[3].unlocked = true;
                    showNotification("New recipe unlocked: Hot Dog!", "success");
                    populateRecipes();
                }
                
                if (gameState.level === 10 && !gameState.recipes[4].unlocked) {
                    gameState.recipes[4].unlocked = true;
                    showNotification("New recipe unlocked: Chocolate Bun!", "success");
                    populateRecipes();
                }
                
                // Unlock more recipes as levels increase
                if (gameState.level > 10 && gameState.level % 5 === 0) {
                    const lockedRecipes = gameState.recipes.filter(r => !r.unlocked);
                    if (lockedRecipes.length > 0) {
                        const recipeToUnlock = lockedRecipes[Math.floor(Math.random() * lockedRecipes.length)];
                        recipeToUnlock.unlocked = true;
                        showNotification(`New recipe unlocked: ${recipeToUnlock.name}!`, "success");
                        populateRecipes();
                    }
                }
            }
            
            updateUI();
        }

        // Populate Shop
        function populateShop() {
            const shopItems = [
                { id: 1, name: "Basic Oven", icon: "🔥", price: 500, type: "oven" },
                { id: 2, name: "Advanced Oven", icon: "🔥", price: 1500, type: "oven" },
                { id: 3, name: "Pro Oven", icon: "🔥", price: 3000, type: "oven" },
                { id: 4, name: "Slot Expansion", icon: "📦", price: 800, type: "upgrade" },
                { id: 5, name: "Speed Booster", icon: "⚡", price: 1200, type: "upgrade" },
                { id: 6, name: "Health Pack", icon: "❤️", price: 300, type: "health" },
                { id: 7, name: "Gems (5)", icon: "💎", price: 500, type: "currency" },
                { id: 8, name: "Gems (15)", icon: "💎", price: 1200, type: "currency" },
                { id: 9, name: "Gems (30)", icon: "💎", price: 2000, type: "currency" },
                { id: 10, name: "Bakery Decoration", icon: "🏪", price: 1000, type: "decoration" },
                { id: 11, name: "Oven Skin", icon: "🎨", price: 700, type: "cosmetic" },
                { id: 12, name: "Tray Decoration", icon: "🍽️", price: 400, type: "cosmetic" }
            ];
            
            shopItems.forEach(item => {
                const itemElement = document.createElement('div');
                itemElement.className = 'shop-item';
                itemElement.innerHTML = `
                    <div class="shop-item-icon">${item.icon}</div>
                    <div class="shop-item-name">${item.name}</div>
                    <div class="shop-item-price">${item.price} coins</div>
                    <button class="btn btn-primary shop-item-button" data-item="${item.id}">Buy</button>
                `;
                
                elements.shopGrid.appendChild(itemElement);
                
                // Add event listener
                itemElement.querySelector('.shop-item-button').addEventListener('click', () => buyShopItem(item));
            });
        }

        // Populate Shop 2
        function populateShop2() {
            // Show first 20 items, with pagination
            const itemsToShow = gameState.shop2Items.slice(0, 20);
            
            itemsToShow.forEach(item => {
                const itemElement = document.createElement('div');
                itemElement.className = 'shop2-item';
                itemElement.innerHTML = `
                    <div class="shop2-item-icon">${item.icon}</div>
                    <div class="shop2-item-name">${item.name}</div>
                    <div class="shop2-item-price">${item.price} coins</div>
                    <button class="btn btn-primary shop2-item-button" data-item="${item.id}">Buy</button>
                `;
                
                elements.shop2Grid.appendChild(itemElement);
                
                // Add event listener
                itemElement.querySelector('.shop2-item-button').addEventListener('click', () => buyShop2Item(item));
            });
        }

        // Buy Shop Item
        function buyShopItem(item) {
            if (gameState.coins < item.price) {
                showNotification("Not enough coins!", "error");
                return;
            }
            
            gameState.coins -= item.price;
            
            switch (item.type) {
                case "oven":
                    addOven();
                    showNotification(`${item.name} added to your bakery!`, "success");
                    break;
                case "upgrade":
                    // For simplicity, we'll just give coins back
                    gameState.coins += item.price;
                    showNotification("Upgrade feature coming soon!", "info");
                    break;
                case "health":
                    gameState.health = Math.min(gameState.maxHealth, gameState.health + 50);
                    showNotification("Health restored!", "success");
                    break;
                case "currency":
                    const gemCount = parseInt(item.name.match(/\d+/)[0]);
                    gameState.gems += gemCount;
                    showNotification(`You got ${gemCount} gems!`, "success");
                    break;
                case "decoration":
                case "cosmetic":
                    // For simplicity, we'll just give coins back
                    gameState.coins += item.price;
                    showNotification("Customization feature coming soon!", "info");
                    break;
            }
            
            updateUI();
        }

        // Buy Shop 2 Item
        function buyShop2Item(item) {
            if (gameState.coins < item.price) {
                showNotification("Not enough coins!", "error");
                return;
            }
            
            gameState.coins -= item.price;
            
            switch (item.type) {
                case "coins":
                    gameState.coins += item.reward;
                    showNotification(`You got ${item.reward} coins!`, "success");
                    break;
                case "gems":
                    gameState.gems += item.reward;
                    showNotification(`You got ${item.reward} gems!`, "success");
                    break;
                case "health":
                    gameState.healthPacks += item.reward;
                    showNotification(`You got ${item.reward} health pack!`, "success");
                    break;
                case "xp":
                    gainXP(item.reward);
                    showNotification(`You got ${item.reward} XP!`, "success");
                    break;
                case "oven":
                    addOven();
                    showNotification(`You got ${item.reward} oven!`, "success");
                    break;
                case "slot":
                    // For simplicity, we'll just give coins back
                    gameState.coins += item.price;
                    showNotification("Slot expansion feature coming soon!", "info");
                    break;
                case "speed":
                    // For simplicity, we'll just give coins back
                    gameState.coins += item.price;
                    showNotification("Speed booster feature coming soon!", "info");
                    break;
                case "gift":
                    gameState.giftBoxes += item.reward;
                    showNotification(`You got ${item.reward} gift box!`, "success");
                    break;
                case "spin":
                    gameState.spinCount += item.reward;
                    showNotification(`You got ${item.reward} spin token!`, "success");
                    break;
                case "recipe":
                    const lockedRecipes = gameState.recipes.filter(r => !r.unlocked);
                    if (lockedRecipes.length > 0) {
                        for (let i = 0; i < item.reward && i < lockedRecipes.length; i++) {
                            const recipeToUnlock = lockedRecipes[Math.floor(Math.random() * lockedRecipes.length)];
                            recipeToUnlock.unlocked = true;
                            showNotification(`New recipe unlocked: ${recipeToUnlock.name}!`, "success");
                        }
                        populateRecipes();
                    } else {
                        showNotification("All recipes already unlocked!", "info");
                    }
                    break;
            }
            
            updateUI();
        }

        // Populate Recipes
        function populateRecipes() {
            elements.recipesGrid.innerHTML = '';
            
            // Show first 20 recipes, with pagination
            const recipesToShow = gameState.recipes.slice(0, 20);
            
            recipesToShow.forEach(recipe => {
                const recipeElement = document.createElement('div');
                recipeElement.className = 'recipe-card';
                
                const statusClass = recipe.unlocked ? 'unlocked' : 'locked';
                const statusText = recipe.unlocked ? 'Unlocked' : 'Locked';
                
                recipeElement.innerHTML = `
                    <div class="recipe-header">
                        <div class="recipe-name">${recipe.name}</div>
                        <div class="recipe-status ${statusClass}">${statusText}</div>
                    </div>
                    <div class="recipe-ingredients">
                        ${recipe.ingredients.map(ing => `
                            <div class="recipe-ingredient">
                                <i class="fas fa-check-circle"></i>
                                <span>${ing}</span>
                            </div>
                        `).join('')}
                    </div>
                    <div>Reward: ${recipe.reward} coins</div>
                    <div>Time: ${recipe.time / 1000}s</div>
                `;
                
                elements.recipesGrid.appendChild(recipeElement);
            });
        }

        // Add New Recipe
        function addNewRecipe() {
            const recipeNames = [
                "Garlic Bread", "Cheese Bread", "Cinnamon Roll", "Pretzel", 
                "Bagel", "Croissant", "Muffin", "Sourdough", "Focaccia", "Naan"
            ];
            
            const ingredientsOptions = [
                ["flour", "water", "yeast", "salt"],
                ["flour", "water", "yeast", "sugar", "eggs"],
                ["flour", "water", "yeast", "milk", "butter"],
                ["flour", "water", "yeast", "honey"],
                ["flour", "water", "yeast", "oil", "herbs"]
            ];
            
            const name = recipeNames[Math.floor(Math.random() * recipeNames.length)];
            const ingredients = ingredientsOptions[Math.floor(Math.random() * ingredientsOptions.length)];
            const time = Math.floor(Math.random() * 3000) + 2000;
            const reward = Math.floor(Math.random() * 20) + 10;
            
            const newRecipe = {
                id: gameState.recipes.length + 1,
                name: name,
                ingredients: ingredients,
                time: time,
                reward: reward,
                unlocked: true
            };
            
            gameState.recipes.push(newRecipe);
            populateRecipes();
            showNotification(`New recipe added: ${name}!`, "success");
        }

        // Populate Level Map
        function populateLevelMap() {
            // Populate world tabs
            elements.levelMapWorlds.innerHTML = '';
            
            gameState.worlds.forEach(world => {
                const worldTab = document.createElement('button');
                worldTab.className = 'world-tab';
                if (world.id === gameState.currentWorld) {
                    worldTab.classList.add('active');
                }
                worldTab.textContent = world.name;
                worldTab.addEventListener('click', () => selectWorld(world.id));
                
                elements.levelMapWorlds.appendChild(worldTab);
            });
            
            // Populate levels for current world
            populateLevelsForWorld(gameState.currentWorld);
        }

        // Select World
        function selectWorld(worldId) {
            gameState.currentWorld = worldId;
            
            // Update active tab
            document.querySelectorAll('.world-tab').forEach(tab => {
                tab.classList.remove('active');
            });
            document.querySelector(`.world-tab:nth-child(${worldId})`).classList.add('active');
            
            // Populate levels for selected world
            populateLevelsForWorld(worldId);
        }

        // Populate Levels for World
        function populateLevelsForWorld(worldId) {
            elements.levelMap.innerHTML = '';
            
            const world = gameState.worlds.find(w => w.id === worldId);
            if (!world) return;
            
            // Show first 50 levels for the world
            const levelsToShow = world.levels.slice(0, 50);
            
            levelsToShow.forEach(level => {
                const levelNode = document.createElement('div');
                levelNode.className = 'level-node';
                
                if (level.completed) {
                    levelNode.classList.add('completed');
                } else if (level.unlocked) {
                    levelNode.classList.add('current');
                } else {
                    levelNode.classList.add('locked');
                }
                
                if (level.isBoss) {
                    levelNode.classList.add('boss');
                }
                
                levelNode.textContent = level.number;
                levelNode.addEventListener('click', () => selectLevel(level));
                
                elements.levelMap.appendChild(levelNode);
            });
        }

        // Select Level
        function selectLevel(level) {
            if (!level.unlocked) {
                showNotification("Level locked! Complete previous levels first.", "error");
                return;
            }
            
            // For simplicity, we'll just show a notification
            showNotification(`Loading level ${level.name}...`, "info");
            
            // In a real game, this would load the level
            setTimeout(() => {
                showNotification(`Level ${level.name} loaded!`, "success");
                
                // Mark level as completed
                if (!level.completed) {
                    level.completed = true;
                    gameState.completedLevels.push(level.id);
                    gameState.coins += level.reward;
                    gameState.score += level.reward;
                    gainXP(20);
                    
                    // Unlock next level
                    const nextLevel = gameState.worlds
                        .find(w => w.id === level.world)
                        .levels.find(l => l.id === level.id + 1);
                    
                    if (nextLevel) {
                        nextLevel.unlocked = true;
                    }
                    
                    updateUI();
                    populateLevelMap();
                }
            }, 1000);
        }

        // Populate Toys
        function populateToys() {
            // Show first 20 toys, with pagination
            const toysToShow = gameState.toys.slice(0, 20);
            
            toysToShow.forEach(toy => {
                const toyElement = document.createElement('div');
                toyElement.className = 'toy-item';
                toyElement.innerHTML = `
                    <div class="toy-item-icon">${toy.icon}</div>
                    <div class="toy-item-name">${toy.name}</div>
                    <div class="toy-item-effect">${toy.effect}</div>
                    <div class="toy-item-price">${toy.price} coins</div>
                    <button class="btn btn-primary toy-item-button" data-toy="${toy.id}">Buy</button>
                `;
                
                elements.toysContainer.appendChild(toyElement);
                
                // Add event listener
                toyElement.querySelector('.toy-item-button').addEventListener('click', () => buyToy(toy));
            });
        }

        // Buy Toy
        function buyToy(toy) {
            if (gameState.coins < toy.price) {
                showNotification("Not enough coins!", "error");
                return;
            }
            
            gameState.coins -= toy.price;
            toy.owned = true;
            
            // Apply toy effect
            switch (toy.name.split(' ')[0]) {
                case "Chef":
                    // Increase cooking speed by 10%
                    showNotification("Cooking speed increased by 10%!", "success");
                    break;
                case "Apron":
                    // Increase customer patience by 20%
                    showNotification("Customer patience increased by 20%!", "success");
                    break;
                case "Rolling":
                    // Decrease cooking time by 15%
                    showNotification("Cooking time decreased by 15%!", "success");
                    break;
                case "Oven":
                    // Prevent burning
                    showNotification("Oven mitts equipped! Food won't burn anymore!", "success");
                    break;
                case "Timer":
                    // Show exact cooking time
                    showNotification("Timer equipped! Exact cooking times shown!", "success");
                    break;
                case "Recipe":
                    // Unlock 5 random recipes
                    const lockedRecipes = gameState.recipes.filter(r => !r.unlocked);
                    if (lockedRecipes.length > 0) {
                        for (let i = 0; i < 5 && i < lockedRecipes.length; i++) {
                            const recipeToUnlock = lockedRecipes[Math.floor(Math.random() * lockedRecipes.length)];
                            recipeToUnlock.unlocked = true;
                        }
                        showNotification("5 new recipes unlocked!", "success");
                        populateRecipes();
                    } else {
                        showNotification("All recipes already unlocked!", "info");
                    }
                    break;
                case "Golden":
                    // Increase rewards by 25%
                    showNotification("Rewards increased by 25%!", "success");
                    break;
                case "Magic":
                    // Instant cooking
                    showNotification("Magic oven equipped! Instant cooking!", "success");
                    break;
                case "Customer":
                    // Attract more customers
                    showNotification("Customer magnet equipped! More customers incoming!", "success");
                    break;
                case "Health":
                    // Increase max health by 50
                    gameState.maxHealth += 50;
                    gameState.health += 50;
                    showNotification("Max health increased by 50!", "success");
                    break;
            }
            
            updateUI();
        }

        // Populate Leaderboard
        function populateLeaderboard() {
            elements.leaderboardBody.innerHTML = '';
            
            gameState.leaderboard.forEach(entry => {
                const row = document.createElement('tr');
                row.innerHTML = `
                    <td>${entry.rank}</td>
                    <td>${entry.name}</td>
                    <td>${entry.level}</td>
                    <td>${entry.score}</td>
                `;
                
                elements.leaderboardBody.appendChild(row);
            });
        }

        // Populate Ad Rewards
        function populateAdRewards() {
            // Show first 20 ad rewards, with pagination
            const adRewardsToShow = gameState.adRewards.slice(0, 20);
            
            adRewardsToShow.forEach(adReward => {
                const adRewardElement = document.createElement('div');
                adRewardElement.className = 'ad-reward-item';
                adRewardElement.innerHTML = `
                    <div class="ad-reward-icon">${adReward.icon}</div>
                    <div class="ad-reward-name">${adReward.name}</div>
                    <div class="ad-reward-reward">${adReward.reward} ${adReward.type}</div>
                    <button class="btn btn-primary ad-reward-button" data-ad="${adReward.id}">Watch Ad</button>
                `;
                
                elements.adRewardsGrid.appendChild(adRewardElement);
                
                // Add event listener
                adRewardElement.querySelector('.ad-reward-button').addEventListener('click', () => watchAdReward(adReward));
            });
        }

        // Watch Ad Reward
        function watchAdReward(adReward) {
            // Check if ad is available
            if (adReward.lastWatch) {
                const now = new Date();
                const lastWatch = new Date(adReward.lastWatch);
                const cooldownHours = getCooldownHours(adReward.cooldown);
                const hoursSince = (now - lastWatch) / (1000 * 60 * 60);
                
                if (hoursSince < cooldownHours) {
                    const remainingHours = Math.ceil(cooldownHours - hoursSince);
                    showNotification(`Ad available in ${remainingHours} hours!`, "error");
                    return;
                }
            }
            
            // Simulate watching ad
            showNotification("Ad loading...", "info");
            
            setTimeout(() => {
                // Update last watch time
                adReward.lastWatch = new Date();
                
                // Give reward
                switch (adReward.type) {
                    case "coins":
                        gameState.coins += adReward.reward;
                        showNotification(`You got ${adReward.reward} coins!`, "success");
                        break;
                    case "gems":
                        gameState.gems += adReward.reward;
                        showNotification(`You got ${adReward.reward} gems!`, "success");
                        break;
                    case "spin":
                        gameState.spinCount += adReward.reward;
                        showNotification(`You got ${adReward.reward} spin token!`, "success");
                        break;
                    case "health":
                        gameState.healthPacks += adReward.reward;
                        showNotification(`You got ${adReward.reward} health pack!`, "success");
                        break;
                    case "xp":
                        gainXP(adReward.reward);
                        showNotification(`You got ${adReward.reward} XP!`, "success");
                        break;
                    case "gift":
                        gameState.giftBoxes += adReward.reward;
                        showNotification(`You got ${adReward.reward} gift box!`, "success");
                        break;
                    case "recipe":
                        const lockedRecipes = gameState.recipes.filter(r => !r.unlocked);
                        if (lockedRecipes.length > 0) {
                            const recipeToUnlock = lockedRecipes[Math.floor(Math.random() * lockedRecipes.length)];
                            recipeToUnlock.unlocked = true;
                            showNotification(`New recipe unlocked: ${recipeToUnlock.name}!`, "success");
                            populateRecipes();
                        } else {
                            showNotification("All recipes already unlocked!", "info");
                        }
                        break;
                }
                
                updateUI();
            }, 2000);
        }

        // Get Cooldown Hours
        function getCooldownHours(cooldown) {
            switch (cooldown) {
                case "6h": return 6;
                case "12h": return 12;
                case "24h": return 24;
                case "7d": return 24 * 7;
                case "30d": return 24 * 30;
                case "365d": return 24 * 365;
                default: return 24;
            }
        }

        // Populate Login Rewards
        function populateLoginRewards() {
            // Daily rewards
            const dailyRewards = [
                { day: 1, coins: 100, gems: 0 },
                { day: 2, coins: 200, gems: 0 },
                { day: 3, coins: 300, gems: 1 },
                { day: 4, coins: 400, gems: 0 },
                { day: 5, coins: 500, gems: 2 },
                { day: 6, coins: 600, gems: 0 },
                { day: 7, coins: 1000, gems: 5 }
            ];
            
            elements.dailyRewardsGrid.innerHTML = '';
            
            dailyRewards.forEach(reward => {
                const rewardElement = document.createElement('div');
                rewardElement.className = 'login-reward-item';
                rewardElement.dataset.day = reward.day;
                
                const today = new Date().getDate();
                const lastReward = gameState.lastDailyReward ? new Date(gameState.lastDailyReward).getDate() : 0;
                
                if (lastReward === today) {
                    rewardElement.classList.add('claimed');
                } else if (lastReward === today - 1 || (lastReward === 31 && today === 1)) {
                    rewardElement.classList.add('available');
                }
                
                rewardElement.innerHTML = `
                    <div class="login-reward-icon">🎁</div>
                    <div class="login-reward-day">Day ${reward.day}</div>
                    <div class="login-reward-amount">${reward.coins} coins</div>
                    ${reward.gems > 0 ? `<div class="login-reward-amount">${reward.gems} gems</div>` : ''}
                    <button class="btn btn-primary login-reward-button" data-day="${reward.day}">Claim</button>
                `;
                
                elements.dailyRewardsGrid.appendChild(rewardElement);
                
                // Add event listener
                rewardElement.querySelector('.login-reward-button').addEventListener('click', () => claimLoginReward('daily', reward.day, reward));
            });
            
            // Weekly rewards
            const weeklyRewards = [
                { week: 1, coins: 1000, gems: 5 },
                { week: 2, coins: 2000, gems: 10 },
                { week: 3, coins: 3000, gems: 15 },
                { week: 4, coins: 5000, gems: 20 }
            ];
            
            elements.weeklyRewardsGrid.innerHTML = '';
            
            weeklyRewards.forEach(reward => {
                const rewardElement = document.createElement('div');
                rewardElement.className = 'login-reward-item';
                rewardElement.dataset.week = reward.week;
                
                const currentWeek = getWeekNumber(new Date());
                const lastReward = gameState.lastWeeklyReward ? getWeekNumber(new Date(gameState.lastWeeklyReward)) : 0;
                
                if (lastReward === currentWeek) {
                    rewardElement.classList.add('claimed');
                } else if (lastReward === currentWeek - 1 || (lastReward === 52 && currentWeek === 1)) {
                    rewardElement.classList.add('available');
                }
                
                rewardElement.innerHTML = `
                    <div class="login-reward-icon">🎁</div>
                    <div class="login-reward-day">Week ${reward.week}</div>
                    <div class="login-reward-amount">${reward.coins} coins</div>
                    <div class="login-reward-amount">${reward.gems} gems</div>
                    <button class="btn btn-primary login-reward-button" data-week="${reward.week}">Claim</button>
                `;
                
                elements.weeklyRewardsGrid.appendChild(rewardElement);
                
                // Add event listener
                rewardElement.querySelector('.login-reward-button').addEventListener('click', () => claimLoginReward('weekly', reward.week, reward));
            });
            
            // Monthly rewards
            const monthlyRewards = [
                { month: 1, coins: 5000, gems: 20 },
                { month: 2, coins: 10000, gems: 40 },
                { month: 3, coins: 15000, gems: 60 },
                { month: 4, coins: 20000, gems: 80 },
                { month: 5, coins: 25000, gems: 100 },
                { month: 6, coins: 30000, gems: 120 },
                { month: 7, coins: 35000, gems: 140 },
                { month: 8, coins: 40000, gems: 160 },
                { month: 9, coins: 45000, gems: 180 },
                { month: 10, coins: 50000, gems: 200 },
                { month: 11, coins: 55000, gems: 220 },
                { month: 12, coins: 60000, gems: 240 }
            ];
            
            elements.monthlyRewardsGrid.innerHTML = '';
            
            monthlyRewards.forEach(reward => {
                const rewardElement = document.createElement('div');
                rewardElement.className = 'login-reward-item';
                rewardElement.dataset.month = reward.month;
                
                const currentMonth = new Date().getMonth() + 1;
                const lastReward = gameState.lastMonthlyReward ? new Date(gameState.lastMonthlyReward).getMonth() + 1 : 0;
                
                if (lastReward === currentMonth) {
                    rewardElement.classList.add('claimed');
                } else if (lastReward === currentMonth - 1 || (lastReward === 12 && currentMonth === 1)) {
                    rewardElement.classList.add('available');
                }
                
                rewardElement.innerHTML = `
                    <div class="login-reward-icon">🎁</div>
                    <div class="login-reward-day">Month ${reward.month}</div>
                    <div class="login-reward-amount">${reward.coins} coins</div>
                    <div class="login-reward-amount">${reward.gems} gems</div>
                    <button class="btn btn-primary login-reward-button" data-month="${reward.month}">Claim</button>
                `;
                
                elements.monthlyRewardsGrid.appendChild(rewardElement);
                
                // Add event listener
                rewardElement.querySelector('.login-reward-button').addEventListener('click', () => claimLoginReward('monthly', reward.month, reward));
            });
            
            // Yearly rewards
            const yearlyRewards = [
                { year: 1, coins: 100000, gems: 500 },
                { year: 2, coins: 200000, gems: 1000 },
                { year: 3, coins: 300000, gems: 1500 },
                { year: 4, coins: 400000, gems: 2000 },
                { year: 5, coins: 500000, gems: 2500 }
            ];
            
            elements.yearlyRewardsGrid.innerHTML = '';
            
            yearlyRewards.forEach(reward => {
                const rewardElement = document.createElement('div');
                rewardElement.className = 'login-reward-item';
                rewardElement.dataset.year = reward.year;
                
                const currentYear = new Date().getFullYear();
                const lastReward = gameState.lastYearlyReward ? new Date(gameState.lastYearlyReward).getFullYear() : 0;
                
                if (lastReward === currentYear) {
                    rewardElement.classList.add('claimed');
                } else if (lastReward === currentYear - 1) {
                    rewardElement.classList.add('available');
                }
                
                rewardElement.innerHTML = `
                    <div class="login-reward-icon">🎁</div>
                    <div class="login-reward-day">Year ${reward.year}</div>
                    <div class="login-reward-amount">${reward.coins} coins</div>
                    <div class="login-reward-amount">${reward.gems} gems</div>
                    <button class="btn btn-primary login-reward-button" data-year="${reward.year}">Claim</button>
                `;
                
                elements.yearlyRewardsGrid.appendChild(rewardElement);
                
                // Add event listener
                rewardElement.querySelector('.login-reward-button').addEventListener('click', () => claimLoginReward('yearly', reward.year, reward));
            });
        }

        // Get Week Number
        function getWeekNumber(date) {
            const d = new Date(Date.UTC(date.getFullYear(), date.getMonth(), date.getDate()));
            const dayNum = d.getUTCDay() || 7;
            d.setUTCDate(d.getUTCDate() + 4 - dayNum);
            const yearStart = new Date(Date.UTC(d.getUTCFullYear(), 0, 1));
            return Math.ceil((((d - yearStart) / 86400000) + 1) / 7);
        }

        // Claim Login Reward
        function claimLoginReward(type, period, reward) {
            let lastReward, currentPeriod, streakKey;
            
            switch (type) {
                case "daily":
                    lastReward = gameState.lastDailyReward ? new Date(gameState.lastDailyReward).getDate() : 0;
                    currentPeriod = new Date().getDate();
                    streakKey = "dailyRewardStreak";
                    break;
                case "weekly":
                    lastReward = gameState.lastWeeklyReward ? getWeekNumber(new Date(gameState.lastWeeklyReward)) : 0;
                    currentPeriod = getWeekNumber(new Date());
                    streakKey = "weeklyRewardStreak";
                    break;
                case "monthly":
                    lastReward = gameState.lastMonthlyReward ? new Date(gameState.lastMonthlyReward).getMonth() + 1 : 0;
                    currentPeriod = new Date().getMonth() + 1;
                    streakKey = "monthlyRewardStreak";
                    break;
                case "yearly":
                    lastReward = gameState.lastYearlyReward ? new Date(gameState.lastYearlyReward).getFullYear() : 0;
                    currentPeriod = new Date().getFullYear();
                    streakKey = "yearlyRewardStreak";
                    break;
            }
            
            if (lastReward === currentPeriod) {
                showNotification(`Already claimed this ${type} reward!`, "error");
                return;
            }
            
            // Calculate streak
            if (lastReward === currentPeriod - 1 || 
                (type === "daily" && lastReward === 31 && currentPeriod === 1) ||
                (type === "weekly" && lastReward === 52 && currentPeriod === 1) ||
                (type === "monthly" && lastReward === 12 && currentPeriod === 1)) {
                gameState[streakKey]++;
            } else {
                gameState[streakKey] = 1;
            }
            
            // Give reward
            gameState.coins += reward.coins;
            gameState.gems += reward.gems;
            
            // Update last reward time
            switch (type) {
                case "daily":
                    gameState.lastDailyReward = new Date();
                    break;
                case "weekly":
                    gameState.lastWeeklyReward = new Date();
                    break;
                case "monthly":
                    gameState.lastMonthlyReward = new Date();
                    break;
                case "yearly":
                    gameState.lastYearlyReward = new Date();
                    break;
            }
            
            updateUI();
            populateLoginRewards();
            
            showNotification(`${type.charAt(0).toUpperCase() + type.slice(1)} reward claimed: ${reward.coins} coins, ${reward.gems} gems!`, "success");
        }

        // Setup Daily Rewards
        function setupDailyRewards() {
            const rewards = [
                { day: 1, coins: 100, gems: 0 },
                { day: 2, coins: 200, gems: 0 },
                { day: 3, coins: 300, gems: 1 },
                { day: 4, coins: 400, gems: 0 },
                { day: 5, coins: 500, gems: 2 },
                { day: 6, coins: 600, gems: 0 },
                { day: 7, coins: 1000, gems: 5 }
            ];
            
            elements.dailyRewards.innerHTML = '';
            
            rewards.forEach(reward => {
                const rewardElement = document.createElement('div');
                rewardElement.className = 'daily-reward';
                rewardElement.dataset.day = reward.day;
                
                const today = new Date().getDate();
                const lastReward = gameState.lastDailyReward ? new Date(gameState.lastDailyReward).getDate() : 0;
                
                if (lastReward === today) {
                    rewardElement.classList.add('claimed');
                } else if (lastReward === today - 1 || (lastReward === 31 && today === 1)) {
                    rewardElement.classList.add('today');
                }
                
                rewardElement.innerHTML = `
                    <div class="daily-reward-icon">🎁</div>
                    <div class="daily-reward-day">Day ${reward.day}</div>
                    <div class="daily-reward-amount">${reward.coins} coins</div>
                    ${reward.gems > 0 ? `<div class="daily-reward-amount">${reward.gems} gems</div>` : ''}
                `;
                
                elements.dailyRewards.appendChild(rewardElement);
            });
        }

        // Check Daily Reward
        function checkDailyReward() {
            const today = new Date().toDateString();
            const lastReward = gameState.lastDailyReward ? new Date(gameState.lastDailyReward).toDateString() : null;
            
            if (lastReward !== today) {
                elements.dailyRewardsModal.classList.add('active');
            }
        }

        // Claim Daily Reward
        function claimDailyReward() {
            const today = new Date().getDate();
            const lastReward = gameState.lastDailyReward ? new Date(gameState.lastDailyReward).getDate() : 0;
            
            if (lastReward === today) {
                showNotification("Already claimed today's reward!", "error");
                return;
            }
            
            // Calculate streak
            if (lastReward === today - 1 || (lastReward === 31 && today === 1)) {
                gameState.dailyRewardStreak++;
            } else {
                gameState.dailyRewardStreak = 1;
            }
            
            // Get reward based on streak
            const rewards = [
                { day: 1, coins: 100, gems: 0 },
                { day: 2, coins: 200, gems: 0 },
                { day: 3, coins: 300, gems: 1 },
                { day: 4, coins: 400, gems: 0 },
                { day: 5, coins: 500, gems: 2 },
                { day: 6, coins: 600, gems: 0 },
                { day: 7, coins: 1000, gems: 5 }
            ];
            
            const rewardIndex = Math.min(gameState.dailyRewardStreak - 1, 6);
            const reward = rewards[rewardIndex];
            
            gameState.coins += reward.coins;
            gameState.gems += reward.gems;
            gameState.lastDailyReward = new Date();
            
            updateUI();
            setupDailyRewards();
            elements.dailyRewardsModal.classList.remove('active');
            
            showNotification(`Daily reward claimed: ${reward.coins} coins, ${reward.gems} gems!`, "success");
        }

        // Spin Wheel
        function spinWheel() {
            if (gameState.coins < 100 && gameState.spinCount === 0) {
                showNotification("Not enough coins or spin tokens!", "error");
                return;
            }
            
            if (gameState.spinCount > 0) {
                gameState.spinCount--;
            } else {
                gameState.coins -= 100;
            }
            
            updateUI();
            
            const wheel = elements.spinWheel;
            const degrees = Math.floor(Math.random() * 360) + 720; // At least 2 full rotations
            
            wheel.style.transform = `rotate(${degrees}deg`;
            
            setTimeout(() => {
                const normalizedDegrees = degrees % 360;
                const prizeIndex = Math.floor(normalizedDegrees / 45);
                const prizes = [
                    { type: "coins", amount: 50 },
                    { type: "coins", amount: 100 },
                    { type: "coins", amount: 200 },
                    { type: "gems", amount: 1 },
                    { type: "coins", amount: 500 },
                    { type: "gems", amount: 3 },
                    { type: "coins", amount: 1000 },
                    { type: "gems", amount: 5 }
                ];
                
                const prize = prizes[prizeIndex];
                
                if (prize.type === "coins") {
                    gameState.coins += prize.amount;
                    showNotification(`You won ${prize.amount} coins!`, "success");
                } else {
                    gameState.gems += prize.amount;
                    showNotification(`You won ${prize.amount} gems!`, "success");
                }
                
                updateUI();
            }, 4000);
        }

        // Free Spin from Ad
        function freeSpinFromAd() {
            // Simulate watching ad
            showNotification("Ad loading...", "info");
            
            setTimeout(() => {
                const wheel = elements.spinWheel;
                const degrees = Math.floor(Math.random() * 360) + 720; // At least 2 full rotations
                
                wheel.style.transform = `rotate(${degrees}deg`;
                
                setTimeout(() => {
                    const normalizedDegrees = degrees % 360;
                    const prizeIndex = Math.floor(normalizedDegrees / 45);
                    const prizes = [
                        { type: "coins", amount: 50 },
                        { type: "coins", amount: 100 },
                        { type: "coins", amount: 200 },
                        { type: "gems", amount: 1 },
                        { type: "coins", amount: 500 },
                        { type: "gems", amount: 3 },
                        { type: "coins", amount: 1000 },
                        { type: "gems", amount: 5 }
                    ];
                    
                    const prize = prizes[prizeIndex];
                    
                    if (prize.type === "coins") {
                        gameState.coins += prize.amount;
                        showNotification(`You won ${prize.amount} coins!`, "success");
                    } else {
                        gameState.gems += prize.amount;
                        showNotification(`You won ${prize.amount} gems!`, "success");
                    }
                    
                    updateUI();
                }, 4000);
            }, 1000);
        }

        // Watch Ad for Coins
        function watchAdForCoins() {
            // Simulate watching ad
            showNotification("Ad loading...", "info");
            
            setTimeout(() => {
                gameState.coins += 100;
                updateUI();
                showNotification("You earned 100 coins!", "success");
            }, 2000);
        }

        // Watch Ad for Gems
        function watchAdForGems() {
            // Simulate watching ad
            showNotification("Ad loading...", "info");
            
            setTimeout(() => {
                gameState.gems += 5;
                updateUI();
                showNotification("You earned 5 gems!", "success");
            }, 2000);
        }

        // Use Health Pack
        function useHealthPack() {
            if (gameState.healthPacks <= 0) {
                showNotification("No health packs available!", "error");
                return;
            }
            
            if (gameState.health >= gameState.maxHealth) {
                showNotification("Health is already full!", "info");
                return;
            }
            
            gameState.healthPacks--;
            gameState.health = gameState.maxHealth;
            updateUI();
            showNotification("Health restored!", "success");
        }

        // Open Gift Box
        function openGiftBox() {
            if (gameState.giftBoxes <= 0) {
                showNotification("No gift boxes available!", "error");
                return;
            }
            
            gameState.giftBoxes--;
            
            // Random reward
            const rewards = [
                { type: "coins", amount: 500 },
                { type: "coins", amount: 1000 },
                { type: "gems", amount: 5 },
                { type: "gems", amount: 10 },
                { type: "health", amount: 50 },
                { type: "healthPacks", amount: 1 },
                { type: "spin", amount: 1 },
                { type: "recipe", amount: 1 }
            ];
            
            const reward = rewards[Math.floor(Math.random() * rewards.length)];
            
            switch (reward.type) {
                case "coins":
                    gameState.coins += reward.amount;
                    showNotification(`You got ${reward.amount} coins!`, "success");
                    break;
                case "gems":
                    gameState.gems += reward.amount;
                    showNotification(`You got ${reward.amount} gems!`, "success");
                    break;
                case "health":
                    gameState.health = Math.min(gameState.maxHealth, gameState.health + reward.amount);
                    showNotification(`You got ${reward.amount} health!`, "success");
                    break;
                case "healthPacks":
                    gameState.healthPacks += reward.amount;
                    showNotification(`You got ${reward.amount} health pack!`, "success");
                    break;
                case "spin":
                    gameState.spinCount += reward.amount;
                    showNotification(`You got ${reward.amount} spin token!`, "success");
                    break;
                case "recipe":
                    const lockedRecipes = gameState.recipes.filter(r => !r.unlocked);
                    if (lockedRecipes.length > 0) {
                        const recipeToUnlock = lockedRecipes[Math.floor(Math.random() * lockedRecipes.length)];
                        recipeToUnlock.unlocked = true;
                        showNotification(`New recipe unlocked: ${recipeToUnlock.name}!`, "success");
                        populateRecipes();
                    } else {
                        showNotification("All recipes already unlocked!", "info");
                    }
                    break;
            }
            
            updateUI();
        }

        // Populate Quick Shop
        function populateQuickShop() {
            const quickShopItems = [
                { id: 1, name: "Coins", icon: "🪙", price: 100 },
                { id: 2, name: "Gems", icon: "💎", price: 10 },
                { id: 3, name: "Health", icon: "❤️", price: 50 },
                { id: 4, name: "Oven", icon: "🔥", price: 500 },
                { id: 5, name: "Slot", icon: "📦", price: 200 },
                { id: 6, name: "Speed", icon: "⚡", price: 300 }
            ];
            
            quickShopItems.forEach(item => {
                const itemElement = document.createElement('div');
                itemElement.className = 'quick-shop-item';
                itemElement.innerHTML = `
                    <div class="quick-shop-item-icon">${item.icon}</div>
                    <div class="quick-shop-item-name">${item.name}</div>
                `;
                
                itemElement.addEventListener('click', () => buyQuickShopItem(item));
                elements.quickShopItems.appendChild(itemElement);
            });
        }

        // Buy Quick Shop Item
        function buyQuickShopItem(item) {
            if (gameState.coins < item.price) {
                showNotification("Not enough coins!", "error");
                return;
            }
            
            gameState.coins -= item.price;
            
            switch (item.name) {
                case "Coins":
                    gameState.coins += 100;
                    showNotification("You got 100 coins!", "success");
                    break;
                case "Gems":
                    gameState.gems += 1;
                    showNotification("You got 1 gem!", "success");
                    break;
                case "Health":
                    gameState.health = Math.min(gameState.maxHealth, gameState.health + 50);
                    showNotification("Health restored!", "success");
                    break;
                case "Oven":
                    addOven();
                    showNotification("New oven added!", "success");
                    break;
                case "Slot":
                    // For simplicity, we'll just give coins back
                    gameState.coins += item.price;
                    showNotification("Slot expansion feature coming soon!", "info");
                    break;
                case "Speed":
                    // For simplicity, we'll just give coins back
                    gameState.coins += item.price;
                    showNotification("Speed booster feature coming soon!", "info");
                    break;
            }
            
            updateUI();
            elements.quickShopModal.classList.remove('active');
        }

        // Find Multiplayer Match
        function findMatch() {
            showNotification("Finding match...", "info");
            
            // Simulate finding a match
            setTimeout(() => {
                gameState.multiplayerActive = true;
                elements.multiplayerLobby.style.display = 'none';
                elements.duelArena.classList.add('active');
                
                // Start duel timer
                startDuelTimer();
                
                showNotification("Match found! Get ready to duel!", "success");
            }, 2000);
        }

        // Start Duel Timer
        function startDuelTimer() {
            const timerBar = document.querySelector('.duel-timer-bar');
            let timeLeft = 60; // 60 seconds duel
            
            gameState.duelTimer = setInterval(() => {
                timeLeft--;
                timerBar.style.width = `${(timeLeft / 60) * 100}%`;
                
                if (timeLeft <= 0) {
                    clearInterval(gameState.duelTimer);
                    endDuel();
                }
            }, 1000);
        }

        // End Duel
        function endDuel() {
            gameState.multiplayerActive = false;
            
            const playerScore = gameState.duelScore.player;
            const opponentScore = gameState.duelScore.opponent;
            
            let result;
            if (playerScore > opponentScore) {
                result = "You won!";
                gameState.coins += 500;
                gameState.gems += 5;
                gameState.score += 100;
            } else if (playerScore < opponentScore) {
                result = "You lost!";
            } else {
                result = "It's a tie!";
                gameState.coins += 200;
                gameState.score += 50;
            }
            
            showNotification(`Duel ended! ${result}`, "info");
            
            // Reset duel
            gameState.duelScore = { player: 0, opponent: 0 };
            elements.multiplayerLobby.style.display = 'grid';
            elements.duelArena.classList.remove('active');
            
            updateUI();
        }

        // Show Notification
        function showNotification(message, type = "info") {
            elements.notificationTitle.textContent = type.charAt(0).toUpperCase() + type.slice(1);
            elements.notificationMessage.textContent = message;
            elements.notification.classList.add('show');
            
            setTimeout(() => {
                elements.notification.classList.remove('show');
            }, 3000);
        }

        // Game Over
        function gameOver() {
            showNotification("Game Over! Your bakery burned down!", "error");
            
            // Reset game
            setTimeout(() => {
                if (confirm("Game Over! Would you like to restart?")) {
                    location.reload();
                }
            }, 1000);
        }

        // Setup Event Listeners
        function setupEventListeners() {
            // Menu tabs
            document.querySelectorAll('.menu-tab').forEach(tab => {
                tab.addEventListener('click', () => {
                    const tabName = tab.dataset.tab;
                    
                    // Update active tab
                    document.querySelectorAll('.menu-tab').forEach(t => t.classList.remove('active'));
                    tab.classList.add('active');
                    
                    // Update active content
                    document.querySelectorAll('.menu-content').forEach(c => c.classList.remove('active'));
                    document.getElementById(`${tabName}-tab`).classList.add('active');
                });
            });
            
            // Login rewards tabs
            document.querySelectorAll('.login-rewards-tab').forEach(tab => {
                tab.addEventListener('click', () => {
                    const rewardsType = tab.dataset.rewards;
                    
                    // Update active tab
                    document.querySelectorAll('.login-rewards-tab').forEach(t => t.classList.remove('active'));
                    tab.classList.add('active');
                    
                    // Update active content
                    document.querySelectorAll('.login-rewards-content').forEach(c => c.classList.remove('active'));
                    document.getElementById(`${rewardsType}-rewards-content`).classList.add('active');
                });
            });
            
            // Game controls
            document.getElementById('addOven').addEventListener('click', addOven);
            document.getElementById('spawnCustomer').addEventListener('click', spawnCustomer);
            document.getElementById('watchAd').addEventListener('click', watchAdForCoins);
            document.getElementById('watchAdGems').addEventListener('click', watchAdForGems);
            document.getElementById('addRecipe').addEventListener('click', addNewRecipe);
            document.getElementById('findMatch').addEventListener('click', findMatch);
            document.getElementById('clearBurnStorage').addEventListener('click', clearBurnStorage);
            
            // Modal controls
            document.getElementById('closeDailyRewards').addEventListener('click', () => {
                elements.dailyRewardsModal.classList.remove('active');
            });
            
            document.getElementById('claimDailyReward').addEventListener('click', claimDailyReward);
            
            document.getElementById('closeSpinWheel').addEventListener('click', () => {
                elements.spinWheelModal.classList.remove('active');
            });
            
            document.getElementById('spinButton').addEventListener('click', spinWheel);
            document.getElementById('freeSpinAd').addEventListener('click', freeSpinFromAd);
            
            // Notification close
            document.getElementById('notificationClose').addEventListener('click', () => {
                elements.notification.classList.remove('show');
            });
            
            // Health pack
            elements.healthPack.addEventListener('click', useHealthPack);
            
            // Gift box
            elements.giftBox.addEventListener('click', openGiftBox);
            
            // Quick shop
            elements.quickShop.addEventListener('click', () => {
                elements.quickShopModal.classList.toggle('active');
            });
            
            // Intro video skip
            document.getElementById('skipIntro').addEventListener('click', () => {
                elements.introVideo.classList.add('hidden');
            });
            
            // Ad integration (simulated)
            // In a real implementation, this would integrate with the Monetag SDK
            // For now, we'll simulate the ad functionality
        }

        // Initialize game when DOM is loaded
        document.addEventListener('DOMContentLoaded', initGame);
    </script>
</body>
</html>